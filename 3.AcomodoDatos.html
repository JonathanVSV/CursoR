<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="es-MX" xml:lang="es-MX"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.5.57">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Jonathan V. Solórzano">

<title>3.AcomodoDatos – CursoRbook</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./4.AnálisisEstad.html" rel="next">
<link href="./2.ManejoDatos.html" rel="prev">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "Sin resultados",
    "search-matching-documents-text": "documentos encontrados",
    "search-copy-link-title": "Copiar el enlace en la búsqueda",
    "search-hide-matches-text": "Ocultar resultados adicionales",
    "search-more-match-text": "resultado adicional en este documento",
    "search-more-matches-text": "resultados adicionales en este documento",
    "search-clear-button-title": "Borrar",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancelar",
    "search-submit-button-title": "Enviar",
    "search-label": "Buscar"
  }
}</script>


</head>

<body class="nav-sidebar floating">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Alternar barra lateral" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./3.AcomodoDatos.html"><span class="chapter-title">3.AcomodoDatos</span></a></li></ol></nav>
        <a class="flex-grow-1" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Alternar barra lateral" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="Buscar" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-full">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="./">CursoRbook</a> 
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Buscar"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Ciencia de datos con R</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./0.Inicio.html" class="sidebar-item-text sidebar-link"><span class="chapter-title">0.Inicio</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./1.IntroducciónR.html" class="sidebar-item-text sidebar-link"><span class="chapter-title">1.Introducción</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./2.ManejoDatos.html" class="sidebar-item-text sidebar-link"><span class="chapter-title">2.ManejoDatos</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./3.AcomodoDatos.html" class="sidebar-item-text sidebar-link active"><span class="chapter-title">3.AcomodoDatos</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./4.AnálisisEstad.html" class="sidebar-item-text sidebar-link"><span class="chapter-title">4.AnálisisEstad</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./5.Ggplot.html" class="sidebar-item-text sidebar-link"><span class="chapter-title">5.Ggplot</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./6.Diversidad.html" class="sidebar-item-text sidebar-link"><span class="chapter-title">6.Diversidad</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./7.Modelos.html" class="sidebar-item-text sidebar-link"><span class="chapter-title">7.Modelos</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./8.CierreyQuarto.html" class="sidebar-item-text sidebar-link"><span class="chapter-title">8.CierreyQuarto</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./9.TareasResueltas.html" class="sidebar-item-text sidebar-link"><span class="chapter-title">9.Tareas Resueltas</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./10.BasesDatosBiodiversidad.html" class="sidebar-item-text sidebar-link"><span class="chapter-title">10.Bases de datos de Biodiversidad</span></a>
  </div>
</li>
    </ul>
    </div>
    <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Tabla de contenidos</h2>
   
  <ul>
  <li><a href="#tidyverse" id="toc-tidyverse" class="nav-link active" data-scroll-target="#tidyverse">Tidyverse</a></li>
  <li><a href="#el-pipe" id="toc-el-pipe" class="nav-link" data-scroll-target="#el-pipe">El pipe</a></li>
  <li><a href="#tibble" id="toc-tibble" class="nav-link" data-scroll-target="#tibble">Tibble</a></li>
  <li><a href="#dplyr" id="toc-dplyr" class="nav-link" data-scroll-target="#dplyr">Dplyr</a>
  <ul class="collapse">
  <li><a href="#seleccionar-columnas" id="toc-seleccionar-columnas" class="nav-link" data-scroll-target="#seleccionar-columnas">Seleccionar columnas</a></li>
  <li><a href="#obtener-valores-distintos-o-únicos" id="toc-obtener-valores-distintos-o-únicos" class="nav-link" data-scroll-target="#obtener-valores-distintos-o-únicos">Obtener valores distintos o únicos</a></li>
  <li><a href="#agregar-nuevas-columnas" id="toc-agregar-nuevas-columnas" class="nav-link" data-scroll-target="#agregar-nuevas-columnas">Agregar nuevas columnas</a></li>
  <li><a href="#renombrar-columnas." id="toc-renombrar-columnas." class="nav-link" data-scroll-target="#renombrar-columnas.">Renombrar columnas.</a></li>
  <li><a href="#ordenar-datos" id="toc-ordenar-datos" class="nav-link" data-scroll-target="#ordenar-datos">Ordenar datos</a></li>
  <li><a href="#filtrar" id="toc-filtrar" class="nav-link" data-scroll-target="#filtrar">Filtrar</a></li>
  <li><a href="#sobreescribir-valores-o-modificar-un-columna-en-su-lugar" id="toc-sobreescribir-valores-o-modificar-un-columna-en-su-lugar" class="nav-link" data-scroll-target="#sobreescribir-valores-o-modificar-un-columna-en-su-lugar">Sobreescribir valores o modificar un columna en su lugar</a></li>
  <li><a href="#selección-de-columnas-con-vectores." id="toc-selección-de-columnas-con-vectores." class="nav-link" data-scroll-target="#selección-de-columnas-con-vectores.">Selección de columnas con vectores.</a></li>
  <li><a href="#agrupar-y-resumir" id="toc-agrupar-y-resumir" class="nav-link" data-scroll-target="#agrupar-y-resumir">Agrupar y resumir</a></li>
  <li><a href="#rebanar-o-sacar-ciertas-filas" id="toc-rebanar-o-sacar-ciertas-filas" class="nav-link" data-scroll-target="#rebanar-o-sacar-ciertas-filas">Rebanar o sacar ciertas filas</a></li>
  <li><a href="#otras-funciones-útiles" id="toc-otras-funciones-útiles" class="nav-link" data-scroll-target="#otras-funciones-útiles">Otras funciones útiles :</a></li>
  </ul></li>
  <li><a href="#tidyr" id="toc-tidyr" class="nav-link" data-scroll-target="#tidyr">Tidyr</a>
  <ul class="collapse">
  <li><a href="#pasar-de-formato-largo-a-ancho-o-viceversa" id="toc-pasar-de-formato-largo-a-ancho-o-viceversa" class="nav-link" data-scroll-target="#pasar-de-formato-largo-a-ancho-o-viceversa">Pasar de formato largo a ancho o viceversa</a></li>
  <li><a href="#anidar-y-desanidar" id="toc-anidar-y-desanidar" class="nav-link" data-scroll-target="#anidar-y-desanidar">Anidar y desanidar</a></li>
  <li><a href="#quitar-na" id="toc-quitar-na" class="nav-link" data-scroll-target="#quitar-na">Quitar NA</a></li>
  <li><a href="#sustituir-na" id="toc-sustituir-na" class="nav-link" data-scroll-target="#sustituir-na">Sustituir NA</a></li>
  <li><a href="#rellenar-datos-vacíos" id="toc-rellenar-datos-vacíos" class="nav-link" data-scroll-target="#rellenar-datos-vacíos">Rellenar datos vacíos</a></li>
  <li><a href="#otras-funciones-útiles-1" id="toc-otras-funciones-útiles-1" class="nav-link" data-scroll-target="#otras-funciones-útiles-1">Otras funciones útiles</a></li>
  </ul></li>
  </ul>
</nav>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar zindex-bottom">
    </div>
<!-- main -->
<main class="content column-page-right" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title"><span class="chapter-title">3.AcomodoDatos</span></h1>
</div>



<div class="quarto-title-meta column-page-right">

    <div>
    <div class="quarto-title-meta-heading">Autor/a</div>
    <div class="quarto-title-meta-contents">
             <p>Jonathan V. Solórzano </p>
          </div>
  </div>
    
    <div>
    <div class="quarto-title-meta-heading">Fecha de publicación</div>
    <div class="quarto-title-meta-contents">
      <p class="date">3 de octubre de 2024</p>
    </div>
  </div>
  
    
  </div>
  


</header>


<p>Instalar paquetes de tidyverse y cargar tidyverse y readxl</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ──
✔ dplyr     1.1.4     ✔ readr     2.1.5
✔ forcats   1.0.0     ✔ stringr   1.5.1
✔ ggplot2   3.5.1     ✔ tibble    3.2.1
✔ lubridate 1.9.3     ✔ tidyr     1.3.1
✔ purrr     1.0.2     
── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──
✖ dplyr::filter() masks stats::filter()
✖ dplyr::lag()    masks stats::lag()
ℹ Use the conflicted package (&lt;http://conflicted.r-lib.org/&gt;) to force all conflicts to become errors</code></pre>
</div>
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(readxl)</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>knitr<span class="sc">::</span>opts_chunk<span class="sc">$</span><span class="fu">set</span>(<span class="at">echo =</span> <span class="cn">TRUE</span>)</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<section id="tidyverse" class="level1">
<h1>Tidyverse</h1>
<p>Conjunto de paquetes con sintáxis similar para facilitar el uso conjunto de funciones.</p>
<p>Ventajas:</p>
<ul>
<li>Permiten encadenar una serie de procesos sin necesidad de ir guardando productos intermedios en objetos basura.</li>
<li>Código más fácil de leer.</li>
<li>Bastante amigable para principiantes.</li>
<li>Muchas funciones permiten hacer lo mismo que R base.</li>
<li>Casi todas las operaciones se realizan de manera vectorizada (evita usar tiempo de cómputo en ciclos no necesarios).</li>
<li>Sin embargo, no a todo mundo le gusta porque dice que cambia mucho la sintáxis de R base.</li>
</ul>
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="imgs/tidyverse.png" class="img-fluid figure-img" style="width:100.0%"></p>
</figure>
</div>
</div>
</div>
<p>En inglés conocido como data wrangling.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>datos <span class="ot">&lt;-</span> <span class="fu">read_excel</span>(<span class="st">"INFyS_2015_2020_Michoacan_de_Ocampo_lHwLKIM.xlsx"</span>,</span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>                  <span class="at">sheet =</span> <span class="st">"Arbolado"</span>)</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting numeric in BW19313 / R19313C75: got 'NULL'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting numeric in BX19313 / R19313C76: got 'NULL'</code></pre>
</div>
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Mostrar la parte superior de los datos</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(datos)</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 76
  UPMID IdConglomerado ArboladoID_C3 Anio_C3 Cve_Estado_C3 Estado_C3 CVEECON1_C3
  &lt;dbl&gt;          &lt;dbl&gt;         &lt;dbl&gt;   &lt;dbl&gt;         &lt;dbl&gt; &lt;chr&gt;           &lt;dbl&gt;
1 40277          67761        801985    2019            16 Michoacá…          14
2 40277          67761        802033    2019            16 Michoacá…          14
3 40277          67761        802948    2019            16 Michoacá…          14
4 40279          67762        135014    2015            16 Michoacá…          14
5 40279          67762        135029    2015            16 Michoacá…          14
6 40279          67762        135035    2015            16 Michoacá…          14
# ℹ 69 more variables: CVEECON2_C3 &lt;dbl&gt;, CVEECON3_C3 &lt;chr&gt;, CVEECON4_C3 &lt;chr&gt;,
#   DESECON1_C3 &lt;chr&gt;, DESECON2_C3 &lt;chr&gt;, DESECON3_C3 &lt;chr&gt;, DESECON4_C3 &lt;chr&gt;,
#   Region_Hidrologica_C3 &lt;chr&gt;, CVE_S7_C3 &lt;chr&gt;, X_C3 &lt;dbl&gt;, Y_C3 &lt;dbl&gt;,
#   DESCRIP_S7_C3 &lt;chr&gt;, FORM_S7_C3 &lt;chr&gt;, FAO_S7_C3 &lt;lgl&gt;, ECO_S7_C3 &lt;chr&gt;,
#   Sitio_C3 &lt;dbl&gt;, Consecutivo_C3 &lt;dbl&gt;, NoIndividuo_C3 &lt;dbl&gt;,
#   NoRama_C3 &lt;dbl&gt;, Azimut_C3 &lt;dbl&gt;, Distancia_C3 &lt;dbl&gt;, NombreComun_C3 &lt;chr&gt;,
#   Familia_APG_C3 &lt;chr&gt;, Genero_APG_C3 &lt;chr&gt;, Especie_APG_C3 &lt;chr&gt;, …</code></pre>
</div>
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Mostrar su estructura</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(datos)</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>tibble [26,035 × 76] (S3: tbl_df/tbl/data.frame)
 $ UPMID                         : num [1:26035] 40277 40277 40277 40279 40279 ...
 $ IdConglomerado                : num [1:26035] 67761 67761 67761 67762 67762 ...
 $ ArboladoID_C3                 : num [1:26035] 801985 802033 802948 135014 135029 ...
 $ Anio_C3                       : num [1:26035] 2019 2019 2019 2015 2015 ...
 $ Cve_Estado_C3                 : num [1:26035] 16 16 16 16 16 16 16 16 16 16 ...
 $ Estado_C3                     : chr [1:26035] "Michoacán de Ocampo" "Michoacán de Ocampo" "Michoacán de Ocampo" "Michoacán de Ocampo" ...
 $ CVEECON1_C3                   : num [1:26035] 14 14 14 14 14 14 14 14 14 14 ...
 $ CVEECON2_C3                   : num [1:26035] 14.5 14.5 14.5 14.5 14.5 14.5 14.5 14.5 14.5 14.5 ...
 $ CVEECON3_C3                   : chr [1:26035] "14.5.2" "14.5.2" "14.5.2" "14.5.2" ...
 $ CVEECON4_C3                   : chr [1:26035] "14.5.2.3" "14.5.2.3" "14.5.2.3" "14.5.2.3" ...
 $ DESECON1_C3                   : chr [1:26035] "Selvas Calido-Secas" "Selvas Calido-Secas" "Selvas Calido-Secas" "Selvas Calido-Secas" ...
 $ DESECON2_C3                   : chr [1:26035] "Planicie Costera y Lomerios del Pacifico Sur" "Planicie Costera y Lomerios del Pacifico Sur" "Planicie Costera y Lomerios del Pacifico Sur" "Planicie Costera y Lomerios del Pacifico Sur" ...
 $ DESECON3_C3                   : chr [1:26035] "Lomerios y Piedemontes del Pacifico Sur Mexicano con Selva Espinosa" "Lomerios y Piedemontes del Pacifico Sur Mexicano con Selva Espinosa" "Lomerios y Piedemontes del Pacifico Sur Mexicano con Selva Espinosa" "Lomerios y Piedemontes del Pacifico Sur Mexicano con Selva Espinosa" ...
 $ DESECON4_C3                   : chr [1:26035] "Planicie Costera y lomerios del Pacifico Sur con selva baja caducifolia" "Planicie Costera y lomerios del Pacifico Sur con selva baja caducifolia" "Planicie Costera y lomerios del Pacifico Sur con selva baja caducifolia" "Planicie Costera y lomerios del Pacifico Sur con selva baja caducifolia" ...
 $ Region_Hidrologica_C3         : chr [1:26035] "Costa de Michoacan" "Costa de Michoacan" "Costa de Michoacan" "Costa de Michoacan" ...
 $ CVE_S7_C3                     : chr [1:26035] "BPQ" "BPQ" "BPQ" "VSA/BPQ" ...
 $ X_C3                          : num [1:26035] -103 -103 -103 -102 -102 ...
 $ Y_C3                          : num [1:26035] 18.2 18.2 18.2 18.2 18.2 ...
 $ DESCRIP_S7_C3                 : chr [1:26035] "BOSQUE DE PINO-ENCINO" "BOSQUE DE PINO-ENCINO" "BOSQUE DE PINO-ENCINO" "VEGETACIÓN SECUNDARIA ARBÓREA DE BOSQUE DE PINO-ENCINO" ...
 $ FORM_S7_C3                    : chr [1:26035] "Coníferas y latifoliadas" "Coníferas y latifoliadas" "Coníferas y latifoliadas" "Coníferas y latifoliadas" ...
 $ FAO_S7_C3                     : logi [1:26035] NA NA NA NA NA NA ...
 $ ECO_S7_C3                     : chr [1:26035] "Bosques" "Bosques" "Bosques" "Bosques" ...
 $ Sitio_C3                      : num [1:26035] 1 3 4 1 1 1 1 2 2 3 ...
 $ Consecutivo_C3                : num [1:26035] 9 19 13 1 14 20 22 12 8 2 ...
 $ NoIndividuo_C3                : num [1:26035] 9 10 8 1 14 20 22 12 8 2 ...
 $ NoRama_C3                     : num [1:26035] 9 19 13 1 16 22 24 12 8 2 ...
 $ Azimut_C3                     : num [1:26035] 44 276 202 16 178 239 281 223 116 135 ...
 $ Distancia_C3                  : num [1:26035] 9.5 8.5 1 9.5 4.4 5.7 8.2 8.5 11.2 3.8 ...
 $ NombreComun_C3                : chr [1:26035] "temezquite" "tocon" "ambula" "encino" ...
 $ Familia_APG_C3                : chr [1:26035] "Fabaceae" "ZZ Familia Desconocida" "Hernandiaceae" "Pinaceae" ...
 $ Genero_APG_C3                 : chr [1:26035] "Lysiloma" "ZZ Genero Desconocido" "Gyrocarpus" "Pinus" ...
 $ Especie_APG_C3                : chr [1:26035] "divaricatum" "NULL" "jatrophifolius" "oocarpa" ...
 $ Categoria_APG_C3              : chr [1:26035] "NULL" "NULL" "NULL" "NULL" ...
 $ Infraespecie_APG_C3           : chr [1:26035] "NULL" "NULL" "NULL" "NULL" ...
 $ NombreCientifico_APG_C3       : chr [1:26035] "Lysiloma divaricatum" "ZZ Genero Desconocido" "Gyrocarpus jatrophifolius" "Pinus oocarpa" ...
 $ Forma_Biologica_Cat_C3        : chr [1:26035] "Arbol" "Indeterminada" "Arbol" "Arbol" ...
 $ FormaFuste_C3                 : chr [1:26035] "Individuo curvo con dos o más fustes" "No capturado" "Individuo curvo con dos o más fustes" "individuo recto con un fuste" ...
 $ Condicion_C3                  : chr [1:26035] "Arbol vivo" "Tocon sin marca" "Arbol vivo" "Arbol vivo" ...
 $ MuertoPie_C3                  : chr [1:26035] "No capturado" "No capturado" "No capturado" "No capturado" ...
 $ GradoPutrefaccion_C3          : chr [1:26035] "No capturado" "No capturado" "No capturado" "No capturado" ...
 $ TipoTocon_C3                  : chr [1:26035] "No capturado" "Tocón madera seca (madera dura sin evidencias de descomposición)" "No capturado" "No capturado" ...
 $ DiametroNormal_C3             : num [1:26035] 7.9 41.2 11.2 16.4 8.7 17.8 25.4 17.4 27.5 36.4 ...
 $ AlturaTotal_C3                : num [1:26035] 8.5 0.97 4.65 8.8 4.5 10.2 13.8 11 15 8.7 ...
 $ AnguloInclinacion_C3          : num [1:26035] 999993 999993 999993 -1 -1 ...
 $ AlturaFusteLimpio_C3          : num [1:26035] 4.3 1.0e+06 1.4 6.7 2.4 ...
 $ AlturaComercial_C3            : num [1:26035] 1.0e+06 1.0e+06 1.4 5.0 1.0e+06 ...
 $ DiametroCopaNS_C3             : num [1:26035] 4.2 1.0e+06 3.2 2.8 3.0 ...
 $ DiametroCopaEO_C3             : num [1:26035] 3.4 1.0e+06 2.9 2.6 2.7 ...
 $ DiametroCopa_C3               : num [1:26035] 3.80 1.00e+06 3.05 2.70 2.85 ...
 $ ProporcionCopaViva_C3         : chr [1:26035] "No capturado" "No capturado" "No capturado" "No capturado" ...
 $ ExposicionCopa_C3             : chr [1:26035] "No capturado" "No capturado" "No capturado" "SI" ...
 $ PosicionCopa_C3               : chr [1:26035] "No capturado" "No capturado" "No capturado" "Suprimido" ...
 $ DensidadCopa_C3               : chr [1:26035] "No capturado" "No capturado" "No capturado" "No capturado" ...
 $ MuerteRegresiva_C3            : chr [1:26035] "No capturado" "No capturado" "No capturado" "No capturado" ...
 $ TransparenciaFollaje_C3       : chr [1:26035] "No capturado" "No capturado" "No capturado" "No capturado" ...
 $ VigorEtapa_C3                 : chr [1:26035] "Árbol joven" "No capturado" "Árbol joven" "Árbol joven" ...
 $ NivelVigor_C3                 : chr [1:26035] "Moderado" "No capturado" "Moderado" "No aplica" ...
 $ AreaBasal_C3                  : num [1:26035] 0.0049 0.13332 0.00985 0.02112 0.00594 ...
 $ AreaCopa_C3                   : num [1:26035] 1.13e+01 1.00e+06 7.30 5.73 6.38 ...
 $ AgenteDanio1_C3               : chr [1:26035] "Ausencia de daño" "Actividades humanas" "Ausencia de daño" "Ausencia de daño" ...
 $ AgenteDanio1_EST_C3           : chr [1:26035] "Ausencia de daño" "Actividades humanas" "Ausencia de daño" "Ausencia de daño" ...
 $ Severidad1_C3                 : chr [1:26035] "No aplica" "No aplica" "No aplica" "No aplica" ...
 $ AgenteDanio2_C3               : chr [1:26035] "Ausencia de daño" "Actividades humanas" "Ausencia de daño" "No capturado" ...
 $ AgenteDanio2_EST_C3           : chr [1:26035] "Ausencia de daño" "Actividades humanas" "Ausencia de daño" "No capturado" ...
 $ Severidad2_C3                 : chr [1:26035] "No aplica" "No aplica" "No aplica" "No aplica" ...
 $ EsSubmuestra_C3               : num [1:26035] 0 0 0 0 0 0 0 0 0 0 ...
 $ DiametroBasalSub_validacion_C3: num [1:26035] 1e+06 1e+06 1e+06 1e+06 1e+06 ...
 $ Edad_C3                       : num [1:26035] 1e+06 1e+06 1e+06 1e+06 1e+06 ...
 $ NumeroAnillos25_C3            : num [1:26035] 1e+06 1e+06 1e+06 1e+06 1e+06 ...
 $ LongitudAnillos10_C3          : num [1:26035] 1e+06 1e+06 1e+06 1e+06 1e+06 ...
 $ GrosorCorteza_C3              : num [1:26035] 1e+06 1e+06 1e+06 1e+06 1e+06 ...
 $ es_para_estimacion_Volumen_C3 : num [1:26035] 1 0 1 1 1 1 1 1 1 1 ...
 $ VolumenVRTA_m3_C3             : num [1:26035] 2.64e-02 1.00e+06 2.75e-02 1.26e-01 1.24e-02 ...
 $ es_para_estimacion_ByC        : num [1:26035] 1 1 1 1 1 1 1 1 1 1 ...
 $ biomasa_kg_C3                 : num [1:26035] 21 35.3 10.5 72.1 18.2 ...
 $ carbono_kg_C3                 : num [1:26035] 9.22 15.76 4.7 35.29 8.05 ...</code></pre>
</div>
</div>
<p>Tres paquetes esenciales para el <em>data wrangling</em> o acomodo de datos: tibble, dplyr y tidyr.</p>
<ul>
<li><p>Tibble: paquete con un nuevo tipo de objeto similar a data.frame, pero con ciertas mejoras. Los tibbles son la base de trabajo del tidyverse.</p></li>
<li><p>Dplyr: Es un paquete que permite modificar y agregar variables, y hacer resumenes.</p></li>
<li><p>Tidyr: Es un paquete que permite acomodar datos y eliminar/rellenar datos faltantes.</p></li>
</ul>
</section>
<section id="el-pipe" class="level1">
<h1>El pipe</h1>
<p>La base del tidyverse. Primero inventado en el paquete “magrittr” (<code>%&gt;%</code>). A partir de R 4.0 ya tiene una implementación base (<code>|&gt;</code>).</p>
<p>El pipe es equivalente a decir que lo que va antes del pipe es el primer argumento de la función.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="fu">mean</span>(datos<span class="sc">$</span>UPMID)</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 66822.59</code></pre>
</div>
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a>datos<span class="sc">$</span>UPMID <span class="sc">|&gt;</span></span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mean</span>()</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 66822.59</code></pre>
</div>
</div>
</section>
<section id="tibble" class="level1">
<h1>Tibble</h1>
<p>Es como un data.frame pero hace menos cosas:</p>
<ul>
<li>No cambia el tipo de las entradas (p.ej., caracter a factor).</li>
<li>No cambia el nombre de las variables.</li>
<li>Nunca crea nombres de filas.</li>
</ul>
<p>Además, tiene una versión mejorada de print para facilitar revisar los datos.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a>datos2 <span class="ot">&lt;-</span> datos <span class="sc">|&gt;</span></span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">as_tibble</span>()</span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a>datos2</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 26,035 × 76
   UPMID IdConglomerado ArboladoID_C3 Anio_C3 Cve_Estado_C3 Estado_C3          
   &lt;dbl&gt;          &lt;dbl&gt;         &lt;dbl&gt;   &lt;dbl&gt;         &lt;dbl&gt; &lt;chr&gt;              
 1 40277          67761        801985    2019            16 Michoacán de Ocampo
 2 40277          67761        802033    2019            16 Michoacán de Ocampo
 3 40277          67761        802948    2019            16 Michoacán de Ocampo
 4 40279          67762        135014    2015            16 Michoacán de Ocampo
 5 40279          67762        135029    2015            16 Michoacán de Ocampo
 6 40279          67762        135035    2015            16 Michoacán de Ocampo
 7 40279          67762        135037    2015            16 Michoacán de Ocampo
 8 40279          67762        135060    2015            16 Michoacán de Ocampo
 9 40279          67762        135056    2015            16 Michoacán de Ocampo
10 40279          67762        135069    2015            16 Michoacán de Ocampo
# ℹ 26,025 more rows
# ℹ 70 more variables: CVEECON1_C3 &lt;dbl&gt;, CVEECON2_C3 &lt;dbl&gt;, CVEECON3_C3 &lt;chr&gt;,
#   CVEECON4_C3 &lt;chr&gt;, DESECON1_C3 &lt;chr&gt;, DESECON2_C3 &lt;chr&gt;, DESECON3_C3 &lt;chr&gt;,
#   DESECON4_C3 &lt;chr&gt;, Region_Hidrologica_C3 &lt;chr&gt;, CVE_S7_C3 &lt;chr&gt;,
#   X_C3 &lt;dbl&gt;, Y_C3 &lt;dbl&gt;, DESCRIP_S7_C3 &lt;chr&gt;, FORM_S7_C3 &lt;chr&gt;,
#   FAO_S7_C3 &lt;lgl&gt;, ECO_S7_C3 &lt;chr&gt;, Sitio_C3 &lt;dbl&gt;, Consecutivo_C3 &lt;dbl&gt;,
#   NoIndividuo_C3 &lt;dbl&gt;, NoRama_C3 &lt;dbl&gt;, Azimut_C3 &lt;dbl&gt;, …</code></pre>
</div>
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(datos2)</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "tbl_df"     "tbl"        "data.frame"</code></pre>
</div>
</div>
<p>Aquí vemos que la clase de los datos es tibble (abreviado como tibble: <code>tbl</code> y tibble_dataframe: <code>tbl_df</code>).</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(datos2)</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "tbl_df"     "tbl"        "data.frame"</code></pre>
</div>
</div>
<p>Si quieres nombrar columnas con caracteres especiales (p.ej., espacios, acentos, comenzar con números) se puede poner el nombre entre ` ` (backticks).</p>
<p>Hay dos formas básicas de crear tibbles a partir de datos.</p>
<ul>
<li>tibble. Como data.frame, i.e., vector por atributo.</li>
<li>tribble. tibble transpuesto, i.e., vectores por filas.</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tibble</span>(<span class="at">a =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>,</span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a>       <span class="at">b =</span> letters[<span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>])</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 5 × 2
      a b    
  &lt;int&gt; &lt;chr&gt;
1     1 a    
2     2 b    
3     3 c    
4     4 d    
5     5 e    </code></pre>
</div>
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tribble</span>(<span class="sc">~</span>a, <span class="sc">~</span>b,</span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a>        <span class="dv">1</span>,<span class="st">"a"</span>,</span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a>        <span class="dv">2</span>, <span class="st">"b"</span>,</span>
<span id="cb23-4"><a href="#cb23-4" aria-hidden="true" tabindex="-1"></a>        <span class="dv">3</span>, <span class="st">"c"</span>,</span>
<span id="cb23-5"><a href="#cb23-5" aria-hidden="true" tabindex="-1"></a>        <span class="dv">4</span>, <span class="st">"d"</span>,</span>
<span id="cb23-6"><a href="#cb23-6" aria-hidden="true" tabindex="-1"></a>        <span class="dv">5</span>, <span class="st">"e"</span>)</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 5 × 2
      a b    
  &lt;dbl&gt; &lt;chr&gt;
1     1 a    
2     2 b    
3     3 c    
4     4 d    
5     5 e    </code></pre>
</div>
</div>
</section>
<section id="dplyr" class="level1">
<h1>Dplyr</h1>
<p>Notar que los nombres de las variables se escriben sin comillas. Si tienen caracteres especiales, con ` `.</p>
<p>Ver algunas características de nuestros datos.</p>
<p>Ver niveles de Tipos de vegetación. Recuerden que CVE_S7_C3 contiene la clave de tipos de vegetación.</p>
<section id="seleccionar-columnas" class="level2">
<h2 class="anchored" data-anchor-id="seleccionar-columnas">Seleccionar columnas</h2>
<p>Seleccionar ciertos atributos.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a>datos <span class="sc">|&gt;</span></span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">distinct</span>(CVE_S7_C3)</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 32 × 1
   CVE_S7_C3
   &lt;chr&gt;    
 1 BPQ      
 2 VSA/BPQ  
 3 BQ       
 4 VSa/SBC  
 5 VSA/SMS  
 6 SBC      
 7 VM       
 8 VSa/BQ   
 9 PC       
10 VSa/BPQ  
# ℹ 22 more rows</code></pre>
</div>
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a>datos <span class="sc">|&gt;</span></span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(UPMID, CVE_S7_C3) </span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 26,035 × 2
   UPMID CVE_S7_C3
   &lt;dbl&gt; &lt;chr&gt;    
 1 40277 BPQ      
 2 40277 BPQ      
 3 40277 BPQ      
 4 40279 VSA/BPQ  
 5 40279 VSA/BPQ  
 6 40279 VSA/BPQ  
 7 40279 VSA/BPQ  
 8 40279 VSA/BPQ  
 9 40279 VSA/BPQ  
10 40279 VSA/BPQ  
# ℹ 26,025 more rows</code></pre>
</div>
</div>
<p>Select es similar a seleccionar por número de columnas, pero haciendo referencia al nombre de la columna. Los nombres de las columnas se ponen sin concatenarlos en un vector (es decir, sin <code>c</code>).</p>
</section>
<section id="obtener-valores-distintos-o-únicos" class="level2">
<h2 class="anchored" data-anchor-id="obtener-valores-distintos-o-únicos">Obtener valores distintos o únicos</h2>
<p>Principal diferencia de <code>distinct</code> con <code>unique</code> es que retorna un tibble, en lugar de vector. Si se quiere obtener un vector se puede usar <code>pull</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a>datos <span class="sc">|&gt;</span></span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">distinct</span>(CVE_S7_C3) <span class="sc">|&gt;</span></span>
<span id="cb29-3"><a href="#cb29-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pull</span>(CVE_S7_C3)</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] "BPQ"     "VSA/BPQ" "BQ"      "VSa/SBC" "VSA/SMS" "SBC"     "VM"     
 [8] "VSa/BQ"  "PC"      "VSa/BPQ" "VSa/BP"  "BP"      "VSA/SBC" "VSA/BQ" 
[15] "VSA/BP"  "BQP"     "VSa/BQP" "TAP"     "RAP"     "TA"      "AH"     
[22] "BA"      "BC"      "VSa/BA"  "BM"      "VSA/BA"  "VSA/BM"  "PI"     
[29] "RP"      "VSA/BQP" "RA"      "TP"     </code></pre>
</div>
</div>
<p>Ver número de valores por columna.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a>datos <span class="sc">|&gt;</span></span>
<span id="cb31-2"><a href="#cb31-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(CVE_S7_C3) <span class="sc">|&gt;</span></span>
<span id="cb31-3"><a href="#cb31-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">n_distinct</span>()</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 32</code></pre>
</div>
</div>
</section>
<section id="agregar-nuevas-columnas" class="level2">
<h2 class="anchored" data-anchor-id="agregar-nuevas-columnas">Agregar nuevas columnas</h2>
<p>Agregar nuevas columnas se hace con <code>mutate</code>. Primero se pone el nuevo nombre de la columna y luego a lo que equivale.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a>datos <span class="sc">|&gt;</span></span>
<span id="cb33-2"><a href="#cb33-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(DiametroNormal_C3) <span class="sc">|&gt;</span></span>
<span id="cb33-3"><a href="#cb33-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">DiametroNormal_C3_m =</span> DiametroNormal_C3<span class="sc">/</span><span class="dv">100</span>)</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 26,035 × 2
   DiametroNormal_C3 DiametroNormal_C3_m
               &lt;dbl&gt;               &lt;dbl&gt;
 1               7.9               0.079
 2              41.2               0.412
 3              11.2               0.112
 4              16.4               0.164
 5               8.7               0.087
 6              17.8               0.178
 7              25.4               0.254
 8              17.4               0.174
 9              27.5               0.275
10              36.4               0.364
# ℹ 26,025 more rows</code></pre>
</div>
</div>
</section>
<section id="renombrar-columnas." class="level2">
<h2 class="anchored" data-anchor-id="renombrar-columnas.">Renombrar columnas.</h2>
<p>Renombrar se hace con <code>rename</code>. Primero se pone nuevo nombre y luego el viejo.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb35"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a>datos <span class="sc">|&gt;</span></span>
<span id="cb35-2"><a href="#cb35-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(DiametroNormal_C3) <span class="sc">|&gt;</span></span>
<span id="cb35-3"><a href="#cb35-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="st">"DAP"</span> <span class="ot">=</span> <span class="st">"DiametroNormal_C3"</span>)</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 26,035 × 1
     DAP
   &lt;dbl&gt;
 1   7.9
 2  41.2
 3  11.2
 4  16.4
 5   8.7
 6  17.8
 7  25.4
 8  17.4
 9  27.5
10  36.4
# ℹ 26,025 more rows</code></pre>
</div>
</div>
</section>
<section id="ordenar-datos" class="level2">
<h2 class="anchored" data-anchor-id="ordenar-datos">Ordenar datos</h2>
<p>Se usa <code>arrange</code>. Por default los ordena de menor a mayor (ascendente). Si no se quiere esto, se usa <code>desc</code> para ponerlos en orden descendente.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb37"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a>datos <span class="sc">|&gt;</span></span>
<span id="cb37-2"><a href="#cb37-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(DiametroNormal_C3) <span class="sc">|&gt;</span></span>
<span id="cb37-3"><a href="#cb37-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(DiametroNormal_C3)</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 26,035 × 1
   DiametroNormal_C3
               &lt;dbl&gt;
 1               7.6
 2               7.6
 3               7.6
 4               7.6
 5               7.6
 6               7.6
 7               7.6
 8               7.6
 9               7.6
10               7.6
# ℹ 26,025 more rows</code></pre>
</div>
<div class="sourceCode cell-code" id="cb39"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a>datos <span class="sc">|&gt;</span></span>
<span id="cb39-2"><a href="#cb39-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(DiametroNormal_C3) <span class="sc">|&gt;</span></span>
<span id="cb39-3"><a href="#cb39-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(DiametroNormal_C3))</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 26,035 × 1
   DiametroNormal_C3
               &lt;dbl&gt;
 1            999993
 2            999993
 3            999993
 4            999993
 5            999993
 6            999993
 7            999993
 8            999993
 9            999993
10            999993
# ℹ 26,025 more rows</code></pre>
</div>
</div>
</section>
<section id="filtrar" class="level2">
<h2 class="anchored" data-anchor-id="filtrar">Filtrar</h2>
<p>Quedarse con una parte de los datos en función de algún criterio en particular.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb41"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a>datos <span class="sc">|&gt;</span></span>
<span id="cb41-2"><a href="#cb41-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(DiametroNormal_C3) <span class="sc">|&gt;</span></span>
<span id="cb41-3"><a href="#cb41-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(DiametroNormal_C3 <span class="sc">&gt;=</span> <span class="dv">99999</span>)</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 625 × 1
   DiametroNormal_C3
               &lt;dbl&gt;
 1            999993
 2            999993
 3            999993
 4            999993
 5            999993
 6            999993
 7            999993
 8            999993
 9            999993
10            999993
# ℹ 615 more rows</code></pre>
</div>
</div>
<p>Si queremos más de una condición (i.e., y) se usa <code>&amp;</code>, operador ó es <code>|</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb43"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a>datos <span class="sc">|&gt;</span></span>
<span id="cb43-2"><a href="#cb43-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(DiametroNormal_C3) <span class="sc">|&gt;</span></span>
<span id="cb43-3"><a href="#cb43-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(DiametroNormal_C3 <span class="sc">&lt;=</span> <span class="dv">99999</span> <span class="sc">&amp;</span> DiametroNormal_C3 <span class="sc">&gt;=</span> <span class="dv">20</span>)</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6,488 × 1
   DiametroNormal_C3
               &lt;dbl&gt;
 1              41.2
 2              25.4
 3              27.5
 4              36.4
 5              28.9
 6              39.8
 7              25.8
 8              20  
 9              30.4
10              32.3
# ℹ 6,478 more rows</code></pre>
</div>
<div class="sourceCode cell-code" id="cb45"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb45-1"><a href="#cb45-1" aria-hidden="true" tabindex="-1"></a>datos <span class="sc">|&gt;</span></span>
<span id="cb45-2"><a href="#cb45-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(DiametroNormal_C3) <span class="sc">|&gt;</span></span>
<span id="cb45-3"><a href="#cb45-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(DiametroNormal_C3 <span class="sc">&lt;=</span> <span class="dv">5</span> <span class="sc">|</span> DiametroNormal_C3 <span class="sc">&gt;=</span> <span class="dv">20</span>)</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 7,113 × 1
   DiametroNormal_C3
               &lt;dbl&gt;
 1              41.2
 2              25.4
 3              27.5
 4              36.4
 5              28.9
 6              39.8
 7              25.8
 8              20  
 9              30.4
10              32.3
# ℹ 7,103 more rows</code></pre>
</div>
</div>
</section>
<section id="sobreescribir-valores-o-modificar-un-columna-en-su-lugar" class="level2">
<h2 class="anchored" data-anchor-id="sobreescribir-valores-o-modificar-un-columna-en-su-lugar">Sobreescribir valores o modificar un columna en su lugar</h2>
<p>Esto se hace con <code>mutate(across())</code>.</p>
<p>Quitar valores de 99999 como NA</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb47"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb47-1"><a href="#cb47-1" aria-hidden="true" tabindex="-1"></a>datos <span class="sc">|&gt;</span></span>
<span id="cb47-2"><a href="#cb47-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(DiametroNormal_C3 <span class="sc">&gt;=</span> <span class="dv">99999</span>)</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 625 × 76
   UPMID IdConglomerado ArboladoID_C3 Anio_C3 Cve_Estado_C3 Estado_C3          
   &lt;dbl&gt;          &lt;dbl&gt;         &lt;dbl&gt;   &lt;dbl&gt;         &lt;dbl&gt; &lt;chr&gt;              
 1 48449          65760        197636    2015            16 Michoacán de Ocampo
 2 40287          67766        802997    2019            16 Michoacán de Ocampo
 3 40289          67767        134939    2015            16 Michoacán de Ocampo
 4 44863          66591        405491    2016            16 Michoacán de Ocampo
 5 46036          66301        406677    2016            16 Michoacán de Ocampo
 6 46132          66349        128928    2015            16 Michoacán de Ocampo
 7 41362          67481        141665    2015            16 Michoacán de Ocampo
 8 40287          67766        802966    2019            16 Michoacán de Ocampo
 9 40287          67766        802967    2019            16 Michoacán de Ocampo
10 38204          68270        143190    2015            16 Michoacán de Ocampo
# ℹ 615 more rows
# ℹ 70 more variables: CVEECON1_C3 &lt;dbl&gt;, CVEECON2_C3 &lt;dbl&gt;, CVEECON3_C3 &lt;chr&gt;,
#   CVEECON4_C3 &lt;chr&gt;, DESECON1_C3 &lt;chr&gt;, DESECON2_C3 &lt;chr&gt;, DESECON3_C3 &lt;chr&gt;,
#   DESECON4_C3 &lt;chr&gt;, Region_Hidrologica_C3 &lt;chr&gt;, CVE_S7_C3 &lt;chr&gt;,
#   X_C3 &lt;dbl&gt;, Y_C3 &lt;dbl&gt;, DESCRIP_S7_C3 &lt;chr&gt;, FORM_S7_C3 &lt;chr&gt;,
#   FAO_S7_C3 &lt;lgl&gt;, ECO_S7_C3 &lt;chr&gt;, Sitio_C3 &lt;dbl&gt;, Consecutivo_C3 &lt;dbl&gt;,
#   NoIndividuo_C3 &lt;dbl&gt;, NoRama_C3 &lt;dbl&gt;, Azimut_C3 &lt;dbl&gt;, …</code></pre>
</div>
<div class="sourceCode cell-code" id="cb49"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb49-1"><a href="#cb49-1" aria-hidden="true" tabindex="-1"></a>datos2 <span class="ot">&lt;-</span> datos <span class="sc">|&gt;</span></span>
<span id="cb49-2"><a href="#cb49-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="fu">across</span>(DiametroNormal_C3, <span class="sc">~</span><span class="fu">ifelse</span>(.x <span class="sc">&gt;=</span> <span class="dv">99999</span>, <span class="cn">NA</span>, .x)))</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Across usa la sintáxis de <code>~</code> para determinar una función que le aplicas a lo que le pases, referenciado como <code>.x</code>. El usar la notación <code>~(.x)</code> es similar a usar <code>function(x)</code> con procesos más simples.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb50"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb50-1"><a href="#cb50-1" aria-hidden="true" tabindex="-1"></a>datos2 <span class="sc">|&gt;</span></span>
<span id="cb50-2"><a href="#cb50-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(DiametroNormal_C3 <span class="sc">&gt;=</span> <span class="dv">99999</span>)</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 0 × 76
# ℹ 76 variables: UPMID &lt;dbl&gt;, IdConglomerado &lt;dbl&gt;, ArboladoID_C3 &lt;dbl&gt;,
#   Anio_C3 &lt;dbl&gt;, Cve_Estado_C3 &lt;dbl&gt;, Estado_C3 &lt;chr&gt;, CVEECON1_C3 &lt;dbl&gt;,
#   CVEECON2_C3 &lt;dbl&gt;, CVEECON3_C3 &lt;chr&gt;, CVEECON4_C3 &lt;chr&gt;, DESECON1_C3 &lt;chr&gt;,
#   DESECON2_C3 &lt;chr&gt;, DESECON3_C3 &lt;chr&gt;, DESECON4_C3 &lt;chr&gt;,
#   Region_Hidrologica_C3 &lt;chr&gt;, CVE_S7_C3 &lt;chr&gt;, X_C3 &lt;dbl&gt;, Y_C3 &lt;dbl&gt;,
#   DESCRIP_S7_C3 &lt;chr&gt;, FORM_S7_C3 &lt;chr&gt;, FAO_S7_C3 &lt;lgl&gt;, ECO_S7_C3 &lt;chr&gt;,
#   Sitio_C3 &lt;dbl&gt;, Consecutivo_C3 &lt;dbl&gt;, NoIndividuo_C3 &lt;dbl&gt;, …</code></pre>
</div>
<div class="sourceCode cell-code" id="cb52"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb52-1"><a href="#cb52-1" aria-hidden="true" tabindex="-1"></a>datos2 <span class="ot">&lt;-</span> datos <span class="sc">|&gt;</span></span>
<span id="cb52-2"><a href="#cb52-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="fu">across</span>(DiametroNormal_C3, <span class="cf">function</span>(x) {</span>
<span id="cb52-3"><a href="#cb52-3" aria-hidden="true" tabindex="-1"></a>    resul <span class="ot">&lt;-</span> <span class="fu">ifelse</span>(x <span class="sc">&gt;=</span> <span class="dv">99999</span>, <span class="cn">NA</span>, x)</span>
<span id="cb52-4"><a href="#cb52-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">return</span>(resul)</span>
<span id="cb52-5"><a href="#cb52-5" aria-hidden="true" tabindex="-1"></a>    }))</span>
<span id="cb52-6"><a href="#cb52-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb52-7"><a href="#cb52-7" aria-hidden="true" tabindex="-1"></a>datos2 <span class="sc">|&gt;</span></span>
<span id="cb52-8"><a href="#cb52-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(DiametroNormal_C3 <span class="sc">&gt;=</span> <span class="dv">99999</span>)</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 0 × 76
# ℹ 76 variables: UPMID &lt;dbl&gt;, IdConglomerado &lt;dbl&gt;, ArboladoID_C3 &lt;dbl&gt;,
#   Anio_C3 &lt;dbl&gt;, Cve_Estado_C3 &lt;dbl&gt;, Estado_C3 &lt;chr&gt;, CVEECON1_C3 &lt;dbl&gt;,
#   CVEECON2_C3 &lt;dbl&gt;, CVEECON3_C3 &lt;chr&gt;, CVEECON4_C3 &lt;chr&gt;, DESECON1_C3 &lt;chr&gt;,
#   DESECON2_C3 &lt;chr&gt;, DESECON3_C3 &lt;chr&gt;, DESECON4_C3 &lt;chr&gt;,
#   Region_Hidrologica_C3 &lt;chr&gt;, CVE_S7_C3 &lt;chr&gt;, X_C3 &lt;dbl&gt;, Y_C3 &lt;dbl&gt;,
#   DESCRIP_S7_C3 &lt;chr&gt;, FORM_S7_C3 &lt;chr&gt;, FAO_S7_C3 &lt;lgl&gt;, ECO_S7_C3 &lt;chr&gt;,
#   Sitio_C3 &lt;dbl&gt;, Consecutivo_C3 &lt;dbl&gt;, NoIndividuo_C3 &lt;dbl&gt;, …</code></pre>
</div>
</div>
<p>Lo mismo en R base</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb54"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb54-1"><a href="#cb54-1" aria-hidden="true" tabindex="-1"></a>datos2 <span class="ot">&lt;-</span> datos</span>
<span id="cb54-2"><a href="#cb54-2" aria-hidden="true" tabindex="-1"></a>datos2<span class="sc">$</span>DiametroNormal_C3[datos2<span class="sc">$</span>DiametroNormal_C3 <span class="sc">&gt;=</span> <span class="dv">99999</span>] <span class="ot">&lt;-</span> <span class="cn">NA</span></span>
<span id="cb54-3"><a href="#cb54-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-4"><a href="#cb54-4" aria-hidden="true" tabindex="-1"></a>datos2 <span class="sc">|&gt;</span></span>
<span id="cb54-5"><a href="#cb54-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(DiametroNormal_C3 <span class="sc">&gt;=</span> <span class="dv">99999</span>)</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 0 × 76
# ℹ 76 variables: UPMID &lt;dbl&gt;, IdConglomerado &lt;dbl&gt;, ArboladoID_C3 &lt;dbl&gt;,
#   Anio_C3 &lt;dbl&gt;, Cve_Estado_C3 &lt;dbl&gt;, Estado_C3 &lt;chr&gt;, CVEECON1_C3 &lt;dbl&gt;,
#   CVEECON2_C3 &lt;dbl&gt;, CVEECON3_C3 &lt;chr&gt;, CVEECON4_C3 &lt;chr&gt;, DESECON1_C3 &lt;chr&gt;,
#   DESECON2_C3 &lt;chr&gt;, DESECON3_C3 &lt;chr&gt;, DESECON4_C3 &lt;chr&gt;,
#   Region_Hidrologica_C3 &lt;chr&gt;, CVE_S7_C3 &lt;chr&gt;, X_C3 &lt;dbl&gt;, Y_C3 &lt;dbl&gt;,
#   DESCRIP_S7_C3 &lt;chr&gt;, FORM_S7_C3 &lt;chr&gt;, FAO_S7_C3 &lt;lgl&gt;, ECO_S7_C3 &lt;chr&gt;,
#   Sitio_C3 &lt;dbl&gt;, Consecutivo_C3 &lt;dbl&gt;, NoIndividuo_C3 &lt;dbl&gt;, …</code></pre>
</div>
</div>
<p>Hacer lo mismo para Altura.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb56"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb56-1"><a href="#cb56-1" aria-hidden="true" tabindex="-1"></a>datos2 <span class="ot">&lt;-</span> datos <span class="sc">|&gt;</span></span>
<span id="cb56-2"><a href="#cb56-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="fu">across</span>(AlturaTotal_C3, <span class="sc">~</span><span class="fu">ifelse</span>(.x <span class="sc">&gt;=</span> <span class="dv">99999</span>, <span class="cn">NA</span>, .x)))</span>
<span id="cb56-3"><a href="#cb56-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-4"><a href="#cb56-4" aria-hidden="true" tabindex="-1"></a>datos2 <span class="sc">|&gt;</span></span>
<span id="cb56-5"><a href="#cb56-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(AlturaTotal_C3 <span class="sc">&gt;=</span> <span class="dv">99999</span>)</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 0 × 76
# ℹ 76 variables: UPMID &lt;dbl&gt;, IdConglomerado &lt;dbl&gt;, ArboladoID_C3 &lt;dbl&gt;,
#   Anio_C3 &lt;dbl&gt;, Cve_Estado_C3 &lt;dbl&gt;, Estado_C3 &lt;chr&gt;, CVEECON1_C3 &lt;dbl&gt;,
#   CVEECON2_C3 &lt;dbl&gt;, CVEECON3_C3 &lt;chr&gt;, CVEECON4_C3 &lt;chr&gt;, DESECON1_C3 &lt;chr&gt;,
#   DESECON2_C3 &lt;chr&gt;, DESECON3_C3 &lt;chr&gt;, DESECON4_C3 &lt;chr&gt;,
#   Region_Hidrologica_C3 &lt;chr&gt;, CVE_S7_C3 &lt;chr&gt;, X_C3 &lt;dbl&gt;, Y_C3 &lt;dbl&gt;,
#   DESCRIP_S7_C3 &lt;chr&gt;, FORM_S7_C3 &lt;chr&gt;, FAO_S7_C3 &lt;lgl&gt;, ECO_S7_C3 &lt;chr&gt;,
#   Sitio_C3 &lt;dbl&gt;, Consecutivo_C3 &lt;dbl&gt;, NoIndividuo_C3 &lt;dbl&gt;, …</code></pre>
</div>
</div>
<p>Varias transformaciones a la vez.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb58"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb58-1"><a href="#cb58-1" aria-hidden="true" tabindex="-1"></a>datos2 <span class="ot">&lt;-</span> datos <span class="sc">|&gt;</span></span>
<span id="cb58-2"><a href="#cb58-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="fu">across</span>(<span class="fu">c</span>(AlturaTotal_C3, DiametroNormal_C3), <span class="sc">~</span><span class="fu">ifelse</span>(.x <span class="sc">&gt;=</span> <span class="dv">99999</span>, <span class="cn">NA</span>, .x)))</span>
<span id="cb58-3"><a href="#cb58-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-4"><a href="#cb58-4" aria-hidden="true" tabindex="-1"></a>datos2 <span class="sc">|&gt;</span></span>
<span id="cb58-5"><a href="#cb58-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(AlturaTotal_C3 <span class="sc">&gt;=</span> <span class="dv">99999</span> <span class="sc">|</span> DiametroNormal_C3 <span class="sc">&gt;=</span> <span class="dv">99999</span>)</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 0 × 76
# ℹ 76 variables: UPMID &lt;dbl&gt;, IdConglomerado &lt;dbl&gt;, ArboladoID_C3 &lt;dbl&gt;,
#   Anio_C3 &lt;dbl&gt;, Cve_Estado_C3 &lt;dbl&gt;, Estado_C3 &lt;chr&gt;, CVEECON1_C3 &lt;dbl&gt;,
#   CVEECON2_C3 &lt;dbl&gt;, CVEECON3_C3 &lt;chr&gt;, CVEECON4_C3 &lt;chr&gt;, DESECON1_C3 &lt;chr&gt;,
#   DESECON2_C3 &lt;chr&gt;, DESECON3_C3 &lt;chr&gt;, DESECON4_C3 &lt;chr&gt;,
#   Region_Hidrologica_C3 &lt;chr&gt;, CVE_S7_C3 &lt;chr&gt;, X_C3 &lt;dbl&gt;, Y_C3 &lt;dbl&gt;,
#   DESCRIP_S7_C3 &lt;chr&gt;, FORM_S7_C3 &lt;chr&gt;, FAO_S7_C3 &lt;lgl&gt;, ECO_S7_C3 &lt;chr&gt;,
#   Sitio_C3 &lt;dbl&gt;, Consecutivo_C3 &lt;dbl&gt;, NoIndividuo_C3 &lt;dbl&gt;, …</code></pre>
</div>
</div>
<p>Seleccionar varios tipos de variables por tipo o por nombre para modificarlas en su lugar. Eso se puede hacer con <code>mutate(across())</code> y la ayuda de algunas de las siguientes funciones.</p>
<ul>
<li>starts_with</li>
<li>ends_with</li>
<li>everything</li>
<li>where + is.numeric | is.character</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb60"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb60-1"><a href="#cb60-1" aria-hidden="true" tabindex="-1"></a>datos2 <span class="ot">&lt;-</span> datos <span class="sc">|&gt;</span></span>
<span id="cb60-2"><a href="#cb60-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="fu">across</span>(<span class="fu">starts_with</span>(<span class="st">"Diametro"</span>), <span class="sc">~</span><span class="fu">ifelse</span>(.x <span class="sc">&gt;=</span> <span class="dv">99999</span>, <span class="cn">NA</span>, .x)))</span>
<span id="cb60-3"><a href="#cb60-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb60-4"><a href="#cb60-4" aria-hidden="true" tabindex="-1"></a>datos2 <span class="sc">|&gt;</span></span>
<span id="cb60-5"><a href="#cb60-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(DiametroNormal_C3 <span class="sc">&gt;=</span> <span class="dv">99999</span> <span class="sc">|</span> DiametroCopaNS_C3 <span class="sc">&gt;=</span> <span class="dv">99999</span> <span class="sc">|</span> DiametroCopaEO_C3 <span class="sc">&gt;=</span> <span class="dv">99999</span> <span class="sc">|</span> DiametroCopa_C3 <span class="sc">&gt;=</span> <span class="dv">99999</span>)</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 0 × 76
# ℹ 76 variables: UPMID &lt;dbl&gt;, IdConglomerado &lt;dbl&gt;, ArboladoID_C3 &lt;dbl&gt;,
#   Anio_C3 &lt;dbl&gt;, Cve_Estado_C3 &lt;dbl&gt;, Estado_C3 &lt;chr&gt;, CVEECON1_C3 &lt;dbl&gt;,
#   CVEECON2_C3 &lt;dbl&gt;, CVEECON3_C3 &lt;chr&gt;, CVEECON4_C3 &lt;chr&gt;, DESECON1_C3 &lt;chr&gt;,
#   DESECON2_C3 &lt;chr&gt;, DESECON3_C3 &lt;chr&gt;, DESECON4_C3 &lt;chr&gt;,
#   Region_Hidrologica_C3 &lt;chr&gt;, CVE_S7_C3 &lt;chr&gt;, X_C3 &lt;dbl&gt;, Y_C3 &lt;dbl&gt;,
#   DESCRIP_S7_C3 &lt;chr&gt;, FORM_S7_C3 &lt;chr&gt;, FAO_S7_C3 &lt;lgl&gt;, ECO_S7_C3 &lt;chr&gt;,
#   Sitio_C3 &lt;dbl&gt;, Consecutivo_C3 &lt;dbl&gt;, NoIndividuo_C3 &lt;dbl&gt;, …</code></pre>
</div>
<div class="sourceCode cell-code" id="cb62"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb62-1"><a href="#cb62-1" aria-hidden="true" tabindex="-1"></a>datos2 <span class="ot">&lt;-</span> datos <span class="sc">|&gt;</span></span>
<span id="cb62-2"><a href="#cb62-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="fu">across</span>(<span class="fu">where</span>(is.numeric), <span class="sc">~</span><span class="fu">ifelse</span>(.x <span class="sc">&gt;=</span> <span class="dv">99999</span>, <span class="cn">NA</span>, .x)))</span>
<span id="cb62-3"><a href="#cb62-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-4"><a href="#cb62-4" aria-hidden="true" tabindex="-1"></a>datos2 <span class="sc">|&gt;</span></span>
<span id="cb62-5"><a href="#cb62-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(UPMID, DiametroNormal_C3, AlturaTotal_C3) <span class="sc">|&gt;</span></span>
<span id="cb62-6"><a href="#cb62-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="fu">across</span>(<span class="fu">everything</span>(), <span class="sc">~</span><span class="fu">ifelse</span>(.x <span class="sc">&gt;=</span> <span class="dv">99999</span>, <span class="cn">NA</span>, .x)))</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 26,035 × 3
   UPMID DiametroNormal_C3 AlturaTotal_C3
   &lt;dbl&gt;             &lt;dbl&gt;          &lt;dbl&gt;
 1 40277               7.9           8.5 
 2 40277              41.2           0.97
 3 40277              11.2           4.65
 4 40279              16.4           8.8 
 5 40279               8.7           4.5 
 6 40279              17.8          10.2 
 7 40279              25.4          13.8 
 8 40279              17.4          11   
 9 40279              27.5          15   
10 40279              36.4           8.7 
# ℹ 26,025 more rows</code></pre>
</div>
</div>
</section>
<section id="selección-de-columnas-con-vectores." class="level2">
<h2 class="anchored" data-anchor-id="selección-de-columnas-con-vectores.">Selección de columnas con vectores.</h2>
<p>Este caso se usa cuando los nombres de las columnas no los sabes de antemano, pero los quieres pasar como un vector. En este caso se usa <code>all_of</code>. Noten que cuando se usa <code>all_of</code>, los nombres de las variables van entre comillas (como caracter). En cambio, si se ponen directamente en across, van sin comillas.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb64"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb64-1"><a href="#cb64-1" aria-hidden="true" tabindex="-1"></a>datos2 <span class="ot">&lt;-</span> datos <span class="sc">|&gt;</span></span>
<span id="cb64-2"><a href="#cb64-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="fu">across</span>(<span class="fu">all_of</span>(<span class="fu">c</span>(<span class="st">"AlturaTotal_C3"</span>, <span class="st">"DiametroNormal_C3"</span>)), <span class="sc">~</span><span class="fu">ifelse</span>(.x <span class="sc">&gt;=</span> <span class="dv">99999</span>, <span class="cn">NA</span>, .x)))</span>
<span id="cb64-3"><a href="#cb64-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb64-4"><a href="#cb64-4" aria-hidden="true" tabindex="-1"></a>datos2 <span class="ot">&lt;-</span> datos <span class="sc">|&gt;</span></span>
<span id="cb64-5"><a href="#cb64-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="fu">across</span>(<span class="fu">c</span>(AlturaTotal_C3, DiametroNormal_C3), <span class="sc">~</span><span class="fu">ifelse</span>(.x <span class="sc">&gt;=</span> <span class="dv">99999</span>, <span class="cn">NA</span>, .x)))</span>
<span id="cb64-6"><a href="#cb64-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb64-7"><a href="#cb64-7" aria-hidden="true" tabindex="-1"></a>datos2 <span class="sc">|&gt;</span></span>
<span id="cb64-8"><a href="#cb64-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(AlturaTotal_C3 <span class="sc">&gt;=</span> <span class="dv">99999</span> <span class="sc">|</span> DiametroNormal_C3 <span class="sc">&gt;=</span> <span class="dv">99999</span>)</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 0 × 76
# ℹ 76 variables: UPMID &lt;dbl&gt;, IdConglomerado &lt;dbl&gt;, ArboladoID_C3 &lt;dbl&gt;,
#   Anio_C3 &lt;dbl&gt;, Cve_Estado_C3 &lt;dbl&gt;, Estado_C3 &lt;chr&gt;, CVEECON1_C3 &lt;dbl&gt;,
#   CVEECON2_C3 &lt;dbl&gt;, CVEECON3_C3 &lt;chr&gt;, CVEECON4_C3 &lt;chr&gt;, DESECON1_C3 &lt;chr&gt;,
#   DESECON2_C3 &lt;chr&gt;, DESECON3_C3 &lt;chr&gt;, DESECON4_C3 &lt;chr&gt;,
#   Region_Hidrologica_C3 &lt;chr&gt;, CVE_S7_C3 &lt;chr&gt;, X_C3 &lt;dbl&gt;, Y_C3 &lt;dbl&gt;,
#   DESCRIP_S7_C3 &lt;chr&gt;, FORM_S7_C3 &lt;chr&gt;, FAO_S7_C3 &lt;lgl&gt;, ECO_S7_C3 &lt;chr&gt;,
#   Sitio_C3 &lt;dbl&gt;, Consecutivo_C3 &lt;dbl&gt;, NoIndividuo_C3 &lt;dbl&gt;, …</code></pre>
</div>
</div>
<p>Ya tenemos nuestros datos un poco más limpios. Veamos algunas estadísticas por grupo.</p>
</section>
<section id="agrupar-y-resumir" class="level2">
<h2 class="anchored" data-anchor-id="agrupar-y-resumir">Agrupar y resumir</h2>
<p>Para agrupar datos por algún nivel se usa <code>group_by</code>. Al imprimir un <code>tibble</code> con <code>group_by</code> nos indica que está agrupado y nos dice el número de grupos.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb66"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb66-1"><a href="#cb66-1" aria-hidden="true" tabindex="-1"></a>datos <span class="ot">&lt;-</span> datos <span class="sc">|&gt;</span></span>
<span id="cb66-2"><a href="#cb66-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="fu">across</span>(<span class="fu">where</span>(is.numeric), <span class="sc">~</span><span class="fu">ifelse</span>(.x <span class="sc">&gt;=</span> <span class="dv">99999</span>, <span class="cn">NA</span>, .x)))</span>
<span id="cb66-3"><a href="#cb66-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb66-4"><a href="#cb66-4" aria-hidden="true" tabindex="-1"></a>datos <span class="sc">|&gt;</span></span>
<span id="cb66-5"><a href="#cb66-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(CVE_S7_C3)</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 26,035 × 76
# Groups:   CVE_S7_C3 [32]
   UPMID IdConglomerado ArboladoID_C3 Anio_C3 Cve_Estado_C3 Estado_C3          
   &lt;dbl&gt;          &lt;dbl&gt;         &lt;dbl&gt;   &lt;dbl&gt;         &lt;dbl&gt; &lt;chr&gt;              
 1 40277          67761            NA    2019            16 Michoacán de Ocampo
 2 40277          67761            NA    2019            16 Michoacán de Ocampo
 3 40277          67761            NA    2019            16 Michoacán de Ocampo
 4 40279          67762            NA    2015            16 Michoacán de Ocampo
 5 40279          67762            NA    2015            16 Michoacán de Ocampo
 6 40279          67762            NA    2015            16 Michoacán de Ocampo
 7 40279          67762            NA    2015            16 Michoacán de Ocampo
 8 40279          67762            NA    2015            16 Michoacán de Ocampo
 9 40279          67762            NA    2015            16 Michoacán de Ocampo
10 40279          67762            NA    2015            16 Michoacán de Ocampo
# ℹ 26,025 more rows
# ℹ 70 more variables: CVEECON1_C3 &lt;dbl&gt;, CVEECON2_C3 &lt;dbl&gt;, CVEECON3_C3 &lt;chr&gt;,
#   CVEECON4_C3 &lt;chr&gt;, DESECON1_C3 &lt;chr&gt;, DESECON2_C3 &lt;chr&gt;, DESECON3_C3 &lt;chr&gt;,
#   DESECON4_C3 &lt;chr&gt;, Region_Hidrologica_C3 &lt;chr&gt;, CVE_S7_C3 &lt;chr&gt;,
#   X_C3 &lt;dbl&gt;, Y_C3 &lt;dbl&gt;, DESCRIP_S7_C3 &lt;chr&gt;, FORM_S7_C3 &lt;chr&gt;,
#   FAO_S7_C3 &lt;lgl&gt;, ECO_S7_C3 &lt;chr&gt;, Sitio_C3 &lt;dbl&gt;, Consecutivo_C3 &lt;dbl&gt;,
#   NoIndividuo_C3 &lt;dbl&gt;, NoRama_C3 &lt;dbl&gt;, Azimut_C3 &lt;dbl&gt;, …</code></pre>
</div>
</div>
<p>Para calcular nuevos valores se usa <code>summarise</code> si se quiere resumir varias filas en una sola. <code>summarise</code> quita todas las columnas que no sean grupos.</p>
<p>Para hacer conteos se puede usar <code>count</code> o <code>summarise(n = n())</code> En este ejemplo <code>n()</code> calcula el número de filas por grupo.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb68"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb68-1"><a href="#cb68-1" aria-hidden="true" tabindex="-1"></a>datos <span class="sc">|&gt;</span></span>
<span id="cb68-2"><a href="#cb68-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(CVE_S7_C3) <span class="sc">|&gt;</span></span>
<span id="cb68-3"><a href="#cb68-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>()</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 32 × 2
# Groups:   CVE_S7_C3 [32]
   CVE_S7_C3     n
   &lt;chr&gt;     &lt;int&gt;
 1 AH           14
 2 BA          354
 3 BC          158
 4 BM          153
 5 BP         3099
 6 BPQ        5513
 7 BQ         1846
 8 BQP         882
 9 PC          181
10 PI          466
# ℹ 22 more rows</code></pre>
</div>
<div class="sourceCode cell-code" id="cb70"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb70-1"><a href="#cb70-1" aria-hidden="true" tabindex="-1"></a>datos <span class="sc">|&gt;</span></span>
<span id="cb70-2"><a href="#cb70-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(CVE_S7_C3) <span class="sc">|&gt;</span></span>
<span id="cb70-3"><a href="#cb70-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">n =</span> <span class="fu">n</span>())</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 32 × 2
   CVE_S7_C3     n
   &lt;chr&gt;     &lt;int&gt;
 1 AH           14
 2 BA          354
 3 BC          158
 4 BM          153
 5 BP         3099
 6 BPQ        5513
 7 BQ         1846
 8 BQP         882
 9 PC          181
10 PI          466
# ℹ 22 more rows</code></pre>
</div>
<div class="sourceCode cell-code" id="cb72"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb72-1"><a href="#cb72-1" aria-hidden="true" tabindex="-1"></a>datos <span class="sc">|&gt;</span></span>
<span id="cb72-2"><a href="#cb72-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(CVE_S7_C3) <span class="sc">|&gt;</span></span>
<span id="cb72-3"><a href="#cb72-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">mean =</span> <span class="fu">mean</span>(biomasa_kg_C3),</span>
<span id="cb72-4"><a href="#cb72-4" aria-hidden="true" tabindex="-1"></a>            <span class="at">sd =</span> <span class="fu">sd</span>(biomasa_kg_C3))</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 32 × 3
   CVE_S7_C3  mean     sd
   &lt;chr&gt;     &lt;dbl&gt;  &lt;dbl&gt;
 1 AH        479.  1135. 
 2 BA        537.   973. 
 3 BC         99.6  165. 
 4 BM        230.   603. 
 5 BP        211.   649. 
 6 BPQ       210.   544. 
 7 BQ        116.   221. 
 8 BQP       194.   458. 
 9 PC        149.   559. 
10 PI         45.9   61.6
# ℹ 22 more rows</code></pre>
</div>
</div>
<p>Por default se quedan los datos agrupados a excepción del último nivel. Para quitarlos. Sugiero siempre poner <code>.groups = "drop"</code> para que no se queden los datos agrupados. El que se queden los datos agrupados puede tener repercusiones no deseadas más abajo en la cadena de procesos. Revisar que el resultado no dice “groups” para asegurarnos que no se quedan agrupados. Mi recomendación es antes de hacer una operación agrupen para que esté muy claro la definición de grupos. También para desagrupar existe la función <code>ungroup</code>.</p>
<p>Se puede agrupar los datos por el número de factores que se quieran.</p>
<p>Por ejemplo, veamos como cambian los resultados dejando los datos agrupados o no. En el primer caso se agrupan los datos por CVE_S7_C3, DESECON3_C3, mientras que en el segundo por ninguna variable.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb74"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb74-1"><a href="#cb74-1" aria-hidden="true" tabindex="-1"></a>datos <span class="sc">|&gt;</span></span>
<span id="cb74-2"><a href="#cb74-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(CVE_S7_C3, DESECON3_C3,DESECON4_C3) <span class="sc">|&gt;</span></span>
<span id="cb74-3"><a href="#cb74-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">mean =</span> <span class="fu">mean</span>(biomasa_kg_C3),</span>
<span id="cb74-4"><a href="#cb74-4" aria-hidden="true" tabindex="-1"></a>            <span class="at">sd =</span> <span class="fu">sd</span>(biomasa_kg_C3)) <span class="sc">|&gt;</span></span>
<span id="cb74-5"><a href="#cb74-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>()</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>`summarise()` has grouped output by 'CVE_S7_C3', 'DESECON3_C3'. You can
override using the `.groups` argument.</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 68 × 3
# Groups:   CVE_S7_C3, DESECON3_C3 [68]
   CVE_S7_C3 DESECON3_C3                                                       n
   &lt;chr&gt;     &lt;chr&gt;                                                         &lt;int&gt;
 1 AH        Lomerios y Sierras con Bosques de Coniferas, Encino y Mixtos…     1
 2 BA        Lomerios y Sierras con Bosques de Coniferas, Encino y Mixtos…     1
 3 BC        Lomerios y Sierras con Bosques de Coniferas, Encino y Mixtos…     1
 4 BM        Lomerios y Sierras con Bosques de Coniferas, Encino y Mixtos…     1
 5 BP        Bosques de Coniferas, Encino y Mixtos de la Sierra Madre del…     1
 6 BP        Lomerios y Sierras con Bosques de Coniferas, Encino y Mixtos…     1
 7 BPQ       Depresion del Balsas con Selva Caducifolia y Matorral Xerofi…     1
 8 BPQ       Lomerios y Piedemontes del Pacifico Sur Mexicano con Selva E…     1
 9 BPQ       Lomerios y Planicies del Interior con Matorral Xerofilo y Bo…     1
10 BPQ       Lomerios y Sierras con Bosques de Coniferas, Encino y Mixtos…     2
# ℹ 58 more rows</code></pre>
</div>
<div class="sourceCode cell-code" id="cb77"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb77-1"><a href="#cb77-1" aria-hidden="true" tabindex="-1"></a>datos <span class="sc">|&gt;</span></span>
<span id="cb77-2"><a href="#cb77-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(CVE_S7_C3, DESECON3_C3, DESECON4_C3) <span class="sc">|&gt;</span></span>
<span id="cb77-3"><a href="#cb77-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">mean =</span> <span class="fu">mean</span>(biomasa_kg_C3),</span>
<span id="cb77-4"><a href="#cb77-4" aria-hidden="true" tabindex="-1"></a>            <span class="at">sd =</span> <span class="fu">sd</span>(biomasa_kg_C3),</span>
<span id="cb77-5"><a href="#cb77-5" aria-hidden="true" tabindex="-1"></a>            <span class="at">.groups =</span> <span class="st">"drop"</span>) <span class="sc">|&gt;</span></span>
<span id="cb77-6"><a href="#cb77-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>()</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1 × 1
      n
  &lt;int&gt;
1    70</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb79"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb79-1"><a href="#cb79-1" aria-hidden="true" tabindex="-1"></a>datos <span class="sc">|&gt;</span></span>
<span id="cb79-2"><a href="#cb79-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(CVE_S7_C3, DESECON3_C3,DESECON4_C3) <span class="sc">|&gt;</span></span>
<span id="cb79-3"><a href="#cb79-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">mean =</span> <span class="fu">mean</span>(biomasa_kg_C3),</span>
<span id="cb79-4"><a href="#cb79-4" aria-hidden="true" tabindex="-1"></a>            <span class="at">sd =</span> <span class="fu">sd</span>(biomasa_kg_C3)) <span class="sc">|&gt;</span></span>
<span id="cb79-5"><a href="#cb79-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">|&gt;</span></span>
<span id="cb79-6"><a href="#cb79-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>()</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>`summarise()` has grouped output by 'CVE_S7_C3', 'DESECON3_C3'. You can
override using the `.groups` argument.</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1 × 1
      n
  &lt;int&gt;
1    70</code></pre>
</div>
<div class="sourceCode cell-code" id="cb82"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb82-1"><a href="#cb82-1" aria-hidden="true" tabindex="-1"></a>datos <span class="sc">|&gt;</span></span>
<span id="cb82-2"><a href="#cb82-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(CVE_S7_C3, DESECON3_C3, DESECON4_C3) <span class="sc">|&gt;</span></span>
<span id="cb82-3"><a href="#cb82-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">mean =</span> <span class="fu">mean</span>(biomasa_kg_C3),</span>
<span id="cb82-4"><a href="#cb82-4" aria-hidden="true" tabindex="-1"></a>            <span class="at">sd =</span> <span class="fu">sd</span>(biomasa_kg_C3),</span>
<span id="cb82-5"><a href="#cb82-5" aria-hidden="true" tabindex="-1"></a>            <span class="at">.groups =</span> <span class="st">"drop"</span>) <span class="sc">|&gt;</span></span>
<span id="cb82-6"><a href="#cb82-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>()</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1 × 1
      n
  &lt;int&gt;
1    70</code></pre>
</div>
</div>
<p>Esto es biomasa promedio por árbol.</p>
<p>Para hacerlo por parcela:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb84"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb84-1"><a href="#cb84-1" aria-hidden="true" tabindex="-1"></a>datos <span class="sc">|&gt;</span></span>
<span id="cb84-2"><a href="#cb84-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(IdConglomerado) <span class="sc">|&gt;</span></span>
<span id="cb84-3"><a href="#cb84-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">AGB =</span> <span class="fu">sum</span>(biomasa_kg_C3),</span>
<span id="cb84-4"><a href="#cb84-4" aria-hidden="true" tabindex="-1"></a>            <span class="at">.groups =</span> <span class="st">"drop"</span>)</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 348 × 2
   IdConglomerado    AGB
            &lt;dbl&gt;  &lt;dbl&gt;
 1          56011  5220.
 2          56504   690.
 3          56794   156.
 4          57005  3241.
 5          57008  2246.
 6          57259 17343.
 7          57260 14427.
 8          57274  4292.
 9          57503  3504.
10          57512  4489.
# ℹ 338 more rows</code></pre>
</div>
</div>
<p>Biomasa total por parcela (1600 m^2) Pasarlo a Mg/ha. Primero extrapolar de 1600 m^2 a 10 000 m^2 y luego de kg a Mg. Generar nueva columna con la biomasa por ha.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb86"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb86-1"><a href="#cb86-1" aria-hidden="true" tabindex="-1"></a>df_agb_sit <span class="ot">&lt;-</span> datos <span class="sc">|&gt;</span></span>
<span id="cb86-2"><a href="#cb86-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(CVE_S7_C3, UPMID) <span class="sc">|&gt;</span></span>
<span id="cb86-3"><a href="#cb86-3" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Resumir por parcela</span></span>
<span id="cb86-4"><a href="#cb86-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">AGB =</span> <span class="fu">sum</span>(biomasa_kg_C3),</span>
<span id="cb86-5"><a href="#cb86-5" aria-hidden="true" tabindex="-1"></a>            <span class="at">.groups =</span> <span class="st">"drop"</span>) <span class="sc">|&gt;</span></span>
<span id="cb86-6"><a href="#cb86-6" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Escalar a 1 ha. Parcelas son 1600 m2 de muestreo</span></span>
<span id="cb86-7"><a href="#cb86-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">scale =</span> <span class="dv">10000</span> <span class="sc">/</span> <span class="dv">1600</span>) <span class="sc">|&gt;</span></span>
<span id="cb86-8"><a href="#cb86-8" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Multiplicar por el factor de escalamiento</span></span>
<span id="cb86-9"><a href="#cb86-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">AGB.ha =</span> AGB <span class="sc">*</span> scale) <span class="sc">|&gt;</span></span>
<span id="cb86-10"><a href="#cb86-10" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Transformar de kg a Mg.</span></span>
<span id="cb86-11"><a href="#cb86-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="fu">across</span>(AGB.ha, <span class="sc">~</span>.x<span class="sc">/</span><span class="dv">1000</span>))</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Ahora sí calcular el AGB promedio pr tipo de vegetación.</p>
<p>Alternativa para desagrupar: <code>ungroup</code></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb87"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb87-1"><a href="#cb87-1" aria-hidden="true" tabindex="-1"></a>df_agb_sit <span class="sc">|&gt;</span></span>
<span id="cb87-2"><a href="#cb87-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(CVE_S7_C3) <span class="sc">|&gt;</span></span>
<span id="cb87-3"><a href="#cb87-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">mean =</span> <span class="fu">mean</span>(AGB.ha),</span>
<span id="cb87-4"><a href="#cb87-4" aria-hidden="true" tabindex="-1"></a>            <span class="at">sd =</span> <span class="fu">sd</span>(AGB.ha)) <span class="sc">|&gt;</span></span>
<span id="cb87-5"><a href="#cb87-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>()</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 32 × 3
   CVE_S7_C3  mean     sd
   &lt;chr&gt;     &lt;dbl&gt;  &lt;dbl&gt;
 1 AH         41.9  NA   
 2 BA        238.  204.  
 3 BC         49.2   6.33
 4 BM        220.   NA   
 5 BP        117.   72.3 
 6 BPQ       111.   79.1 
 7 BQ         58.4  36.8 
 8 BQP        97.3  64.1 
 9 PC         42.2  45.4 
10 PI         19.1   7.38
# ℹ 22 more rows</code></pre>
</div>
</div>
<p>Hay algunas que salen NA, seguramente porque hay NA en esas parcelas. No usarlas para los calculos</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb89"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb89-1"><a href="#cb89-1" aria-hidden="true" tabindex="-1"></a>df_agb_sit <span class="sc">|&gt;</span></span>
<span id="cb89-2"><a href="#cb89-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(CVE_S7_C3) <span class="sc">|&gt;</span></span>
<span id="cb89-3"><a href="#cb89-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">mean =</span> <span class="fu">mean</span>(AGB.ha, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb89-4"><a href="#cb89-4" aria-hidden="true" tabindex="-1"></a>            <span class="at">sd =</span> <span class="fu">sd</span>(AGB.ha, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)) <span class="sc">|&gt;</span></span>
<span id="cb89-5"><a href="#cb89-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>()</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 32 × 3
   CVE_S7_C3  mean     sd
   &lt;chr&gt;     &lt;dbl&gt;  &lt;dbl&gt;
 1 AH         41.9  NA   
 2 BA        238.  204.  
 3 BC         49.2   6.33
 4 BM        220.   NA   
 5 BP        117.   72.3 
 6 BPQ       111.   79.1 
 7 BQ         58.4  36.8 
 8 BQP        97.3  64.1 
 9 PC         42.2  45.4 
10 PI         19.1   7.38
# ℹ 22 more rows</code></pre>
</div>
</div>
<p>Algunas tienen sd = NA, seguramente tienen un solo sitio de muestreo (no hay variación). Veamos con <code>count</code> para contar</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb91"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb91-1"><a href="#cb91-1" aria-hidden="true" tabindex="-1"></a>df_agb_sit <span class="sc">|&gt;</span></span>
<span id="cb91-2"><a href="#cb91-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(CVE_S7_C3) <span class="sc">|&gt;</span></span>
<span id="cb91-3"><a href="#cb91-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>()</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 32 × 2
# Groups:   CVE_S7_C3 [32]
   CVE_S7_C3     n
   &lt;chr&gt;     &lt;int&gt;
 1 AH            1
 2 BA            5
 3 BC            2
 4 BM            1
 5 BP           35
 6 BPQ          65
 7 BQ           23
 8 BQP          11
 9 PC            4
10 PI            7
# ℹ 22 more rows</code></pre>
</div>
</div>
</section>
<section id="rebanar-o-sacar-ciertas-filas" class="level2">
<h2 class="anchored" data-anchor-id="rebanar-o-sacar-ciertas-filas">Rebanar o sacar ciertas filas</h2>
<p>Sacar valores más altos o más bajos por grupo se puede hacer con <code>arrange</code> y <code>slice</code>. O también existen las versiones <code>slice_head</code> y <code>slice_tail</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb93"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb93-1"><a href="#cb93-1" aria-hidden="true" tabindex="-1"></a>df_agb_sit <span class="sc">|&gt;</span></span>
<span id="cb93-2"><a href="#cb93-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(CVE_S7_C3) <span class="sc">|&gt;</span></span>
<span id="cb93-3"><a href="#cb93-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(AGB.ha)) <span class="sc">|&gt;</span></span>
<span id="cb93-4"><a href="#cb93-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice</span>(<span class="dv">1</span>)</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 32 × 5
# Groups:   CVE_S7_C3 [32]
   CVE_S7_C3 UPMID    AGB scale AGB.ha
   &lt;chr&gt;     &lt;dbl&gt;  &lt;dbl&gt; &lt;dbl&gt;  &lt;dbl&gt;
 1 AH        73554  6701.  6.25   41.9
 2 BA        74619 92682.  6.25  579. 
 3 BC        71551  8583.  6.25   53.6
 4 BM        73604 35120.  6.25  220. 
 5 BP        70552 54020.  6.25  338. 
 6 BPQ       71523 66583.  6.25  416. 
 7 BQ        74589 25589.  6.25  160. 
 8 BQP       69510 39233.  6.25  245. 
 9 PC        42488 16929.  6.25  106. 
10 PI        71509  5304.  6.25   33.1
# ℹ 22 more rows</code></pre>
</div>
</div>
<p>Lo mismo, pero con <code>slice_head</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb95"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb95-1"><a href="#cb95-1" aria-hidden="true" tabindex="-1"></a>df_agb_sit <span class="sc">|&gt;</span></span>
<span id="cb95-2"><a href="#cb95-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(CVE_S7_C3) <span class="sc">|&gt;</span></span>
<span id="cb95-3"><a href="#cb95-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(AGB.ha)) <span class="sc">|&gt;</span></span>
<span id="cb95-4"><a href="#cb95-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice_head</span>(<span class="at">n =</span> <span class="dv">1</span>)</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 32 × 5
# Groups:   CVE_S7_C3 [32]
   CVE_S7_C3 UPMID    AGB scale AGB.ha
   &lt;chr&gt;     &lt;dbl&gt;  &lt;dbl&gt; &lt;dbl&gt;  &lt;dbl&gt;
 1 AH        73554  6701.  6.25   41.9
 2 BA        74619 92682.  6.25  579. 
 3 BC        71551  8583.  6.25   53.6
 4 BM        73604 35120.  6.25  220. 
 5 BP        70552 54020.  6.25  338. 
 6 BPQ       71523 66583.  6.25  416. 
 7 BQ        74589 25589.  6.25  160. 
 8 BQP       69510 39233.  6.25  245. 
 9 PC        42488 16929.  6.25  106. 
10 PI        71509  5304.  6.25   33.1
# ℹ 22 more rows</code></pre>
</div>
</div>
<p>Para pasar de un objeto tipo tibble a uno de tipo vector se puede hacer con <code>pull</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb97"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb97-1"><a href="#cb97-1" aria-hidden="true" tabindex="-1"></a>df_agb_sit <span class="sc">|&gt;</span></span>
<span id="cb97-2"><a href="#cb97-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(CVE_S7_C3) <span class="sc">|&gt;</span></span>
<span id="cb97-3"><a href="#cb97-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(AGB.ha)) <span class="sc">|&gt;</span></span>
<span id="cb97-4"><a href="#cb97-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice_head</span>(<span class="at">n =</span> <span class="dv">1</span>) <span class="sc">|&gt;</span></span>
<span id="cb97-5"><a href="#cb97-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pull</span>(AGB.ha)</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1]  41.881903 579.260686  53.646391 219.502453 337.624463 416.146763
 [7] 159.930558 245.206817 105.803482  33.148318   2.293781   1.540609
[13]  32.690510  72.806867  66.026971  41.906103  18.885354  16.576570
[19]  36.662336  55.051676  87.933281 179.437483 156.779441 114.498957
[25]  56.464526 102.589533  67.534450 413.846176  89.985899  95.626391
[31] 161.376240  69.519826</code></pre>
</div>
</div>
</section>
<section id="otras-funciones-útiles" class="level2">
<h2 class="anchored" data-anchor-id="otras-funciones-útiles">Otras funciones útiles :</h2>
<p>Algunas otras funciones de <code>dplyr</code>.</p>
<ul>
<li>rowwise. Hacer operaciones por cada fila.</li>
<li>bind_rows, bind_cols. Pegar listas por filas o por columnas. Función bastante útil para cuando tienes múltiples entradas con read.csv o algo similar.</li>
<li>any_of. Como <code>all_of</code> pero para cuando quieres evaluar una condición sobre alguna en lugar de todas las variables.</li>
<li>left_join, right_join, full_join, anti_join. Útiles para unir dos tablas que comparten un campo en común. Diferentes formas de hacer estas uniones.</li>
<li>lag, lead. Para hacer operaciones “rolling”, por ejemplo, restar a cada valor el anterior o sumar. Usados para hacer sumas acumulativas.</li>
</ul>
</section>
</section>
<section id="tidyr" class="level1">
<h1>Tidyr</h1>
<p>Dos formatos principales en datos tabulados: largo (long) y ancho (wide). Hay dos funciones para cambiar rápida y fácilmente de un formato a otro:</p>
<section id="pasar-de-formato-largo-a-ancho-o-viceversa" class="level2">
<h2 class="anchored" data-anchor-id="pasar-de-formato-largo-a-ancho-o-viceversa">Pasar de formato largo a ancho o viceversa</h2>
<p>Para pasar de formato ancho a largo: <code>pivot_longer</code>, para pasar de largo a ancho: <code>pivot_wider</code>.</p>
<p>Esto es formato largo</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb99"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb99-1"><a href="#cb99-1" aria-hidden="true" tabindex="-1"></a>datos <span class="sc">|&gt;</span></span>
<span id="cb99-2"><a href="#cb99-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(IdConglomerado,biomasa_kg_C3,DiametroNormal_C3) <span class="sc">|&gt;</span></span>
<span id="cb99-3"><a href="#cb99-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(<span class="at">cols =</span> <span class="sc">-</span>IdConglomerado,</span>
<span id="cb99-4"><a href="#cb99-4" aria-hidden="true" tabindex="-1"></a>              <span class="at">names_to =</span> <span class="st">"Variable"</span>,</span>
<span id="cb99-5"><a href="#cb99-5" aria-hidden="true" tabindex="-1"></a>               <span class="at">values_to =</span> <span class="st">"Valor"</span>)</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 52,070 × 3
   IdConglomerado Variable          Valor
            &lt;dbl&gt; &lt;chr&gt;             &lt;dbl&gt;
 1          67761 biomasa_kg_C3      21.0
 2          67761 DiametroNormal_C3   7.9
 3          67761 biomasa_kg_C3      35.3
 4          67761 DiametroNormal_C3  41.2
 5          67761 biomasa_kg_C3      10.5
 6          67761 DiametroNormal_C3  11.2
 7          67762 biomasa_kg_C3      72.1
 8          67762 DiametroNormal_C3  16.4
 9          67762 biomasa_kg_C3      18.2
10          67762 DiametroNormal_C3   8.7
# ℹ 52,060 more rows</code></pre>
</div>
</div>
<p>Para generar exactamente el mismo formato necesitamos un id por planta para que cada árbol tenga su propio altura y diámetro. Para regresar a los datos como los teníamos en original (formato ancho).</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb101"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb101-1"><a href="#cb101-1" aria-hidden="true" tabindex="-1"></a>datos <span class="sc">|&gt;</span></span>
<span id="cb101-2"><a href="#cb101-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(IdConglomerado,biomasa_kg_C3,DiametroNormal_C3) <span class="sc">|&gt;</span></span>
<span id="cb101-3"><a href="#cb101-3" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Agregar un identificador único para volver a generar bien los datos en formato ancho</span></span>
<span id="cb101-4"><a href="#cb101-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">id =</span> <span class="fu">row_number</span>()) <span class="sc">|&gt;</span></span>
<span id="cb101-5"><a href="#cb101-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(<span class="at">cols =</span> <span class="sc">-</span><span class="fu">c</span>(IdConglomerado, id),</span>
<span id="cb101-6"><a href="#cb101-6" aria-hidden="true" tabindex="-1"></a>              <span class="at">names_to =</span> <span class="st">"Variable"</span>,</span>
<span id="cb101-7"><a href="#cb101-7" aria-hidden="true" tabindex="-1"></a>               <span class="at">values_to =</span> <span class="st">"Valor"</span>) <span class="sc">|&gt;</span></span>
<span id="cb101-8"><a href="#cb101-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_wider</span>(<span class="at">id_cols =</span> <span class="fu">c</span>(IdConglomerado, id),</span>
<span id="cb101-9"><a href="#cb101-9" aria-hidden="true" tabindex="-1"></a>              <span class="at">names_from =</span> <span class="st">"Variable"</span>,</span>
<span id="cb101-10"><a href="#cb101-10" aria-hidden="true" tabindex="-1"></a>              <span class="at">values_from =</span> <span class="st">"Valor"</span>)</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 26,035 × 4
   IdConglomerado    id biomasa_kg_C3 DiametroNormal_C3
            &lt;dbl&gt; &lt;int&gt;         &lt;dbl&gt;             &lt;dbl&gt;
 1          67761     1          21.0               7.9
 2          67761     2          35.3              41.2
 3          67761     3          10.5              11.2
 4          67762     4          72.1              16.4
 5          67762     5          18.2               8.7
 6          67762     6          89.4              17.8
 7          67762     7         227.               25.4
 8          67762     8          84.2              17.4
 9          67762     9         280.               27.5
10          67762    10         165.               36.4
# ℹ 26,025 more rows</code></pre>
</div>
</div>
<p>¿Qué pasa si no ponemos el id?</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb103"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb103-1"><a href="#cb103-1" aria-hidden="true" tabindex="-1"></a>datos <span class="sc">|&gt;</span></span>
<span id="cb103-2"><a href="#cb103-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(IdConglomerado,biomasa_kg_C3,DiametroNormal_C3) <span class="sc">|&gt;</span></span>
<span id="cb103-3"><a href="#cb103-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(<span class="at">cols =</span> <span class="sc">-</span><span class="fu">c</span>(IdConglomerado),</span>
<span id="cb103-4"><a href="#cb103-4" aria-hidden="true" tabindex="-1"></a>              <span class="at">names_to =</span> <span class="st">"Variable"</span>,</span>
<span id="cb103-5"><a href="#cb103-5" aria-hidden="true" tabindex="-1"></a>               <span class="at">values_to =</span> <span class="st">"Valor"</span>) <span class="sc">|&gt;</span></span>
<span id="cb103-6"><a href="#cb103-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_wider</span>(<span class="at">id_cols =</span> <span class="fu">c</span>(IdConglomerado),</span>
<span id="cb103-7"><a href="#cb103-7" aria-hidden="true" tabindex="-1"></a>              <span class="at">names_from =</span> <span class="st">"Variable"</span>,</span>
<span id="cb103-8"><a href="#cb103-8" aria-hidden="true" tabindex="-1"></a>              <span class="at">values_from =</span> <span class="st">"Valor"</span>)</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Values from `Valor` are not uniquely identified; output will contain list-cols.
• Use `values_fn = list` to suppress this warning.
• Use `values_fn = {summary_fun}` to summarise duplicates.
• Use the following dplyr code to identify duplicates.
  {data} |&gt;
  dplyr::summarise(n = dplyr::n(), .by = c(IdConglomerado, Variable)) |&gt;
  dplyr::filter(n &gt; 1L)</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 348 × 3
   IdConglomerado biomasa_kg_C3 DiametroNormal_C3
            &lt;dbl&gt; &lt;list&gt;        &lt;list&gt;           
 1          67761 &lt;dbl [79]&gt;    &lt;dbl [79]&gt;       
 2          67762 &lt;dbl [74]&gt;    &lt;dbl [74]&gt;       
 3          67766 &lt;dbl [51]&gt;    &lt;dbl [51]&gt;       
 4          67767 &lt;dbl [23]&gt;    &lt;dbl [23]&gt;       
 5          68781 &lt;dbl [33]&gt;    &lt;dbl [33]&gt;       
 6          68270 &lt;dbl [180]&gt;   &lt;dbl [180]&gt;      
 7          67481 &lt;dbl [37]&gt;    &lt;dbl [37]&gt;       
 8          67484 &lt;dbl [71]&gt;    &lt;dbl [71]&gt;       
 9          67491 &lt;dbl [219]&gt;   &lt;dbl [219]&gt;      
10          67493 &lt;dbl [84]&gt;    &lt;dbl [84]&gt;       
# ℹ 338 more rows</code></pre>
</div>
</div>
<p>En automático cuando no tenemos una entrada única por los niveles de la columna marcada como <code>id_cols</code> va a meter los datos en una lista. Vean el aviso. Las listas se van a ver como <code>&lt; tipo de variable y cuántos datos tiene&gt;</code>. En este caso el tipo de variable es “double” <code>dbl</code>.</p>
<p>Para evitar el aviso podemos indicarle que esperamos que no haya entradas únicas por los niveles de <code>id_cols</code> y que si esto pasa lo meta dentro de una lista.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb106"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb106-1"><a href="#cb106-1" aria-hidden="true" tabindex="-1"></a>datos <span class="sc">|&gt;</span></span>
<span id="cb106-2"><a href="#cb106-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(IdConglomerado,biomasa_kg_C3,DiametroNormal_C3) <span class="sc">|&gt;</span></span>
<span id="cb106-3"><a href="#cb106-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(<span class="at">cols =</span> <span class="sc">-</span><span class="fu">c</span>(IdConglomerado),</span>
<span id="cb106-4"><a href="#cb106-4" aria-hidden="true" tabindex="-1"></a>              <span class="at">names_to =</span> <span class="st">"Variable"</span>,</span>
<span id="cb106-5"><a href="#cb106-5" aria-hidden="true" tabindex="-1"></a>               <span class="at">values_to =</span> <span class="st">"Valor"</span>) <span class="sc">|&gt;</span></span>
<span id="cb106-6"><a href="#cb106-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_wider</span>(<span class="at">id_cols =</span> <span class="fu">c</span>(IdConglomerado),</span>
<span id="cb106-7"><a href="#cb106-7" aria-hidden="true" tabindex="-1"></a>              <span class="at">names_from =</span> <span class="st">"Variable"</span>,</span>
<span id="cb106-8"><a href="#cb106-8" aria-hidden="true" tabindex="-1"></a>              <span class="at">values_from =</span> <span class="st">"Valor"</span>,</span>
<span id="cb106-9"><a href="#cb106-9" aria-hidden="true" tabindex="-1"></a>              <span class="at">values_fn =</span> list)</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 348 × 3
   IdConglomerado biomasa_kg_C3 DiametroNormal_C3
            &lt;dbl&gt; &lt;list&gt;        &lt;list&gt;           
 1          67761 &lt;dbl [79]&gt;    &lt;dbl [79]&gt;       
 2          67762 &lt;dbl [74]&gt;    &lt;dbl [74]&gt;       
 3          67766 &lt;dbl [51]&gt;    &lt;dbl [51]&gt;       
 4          67767 &lt;dbl [23]&gt;    &lt;dbl [23]&gt;       
 5          68781 &lt;dbl [33]&gt;    &lt;dbl [33]&gt;       
 6          68270 &lt;dbl [180]&gt;   &lt;dbl [180]&gt;      
 7          67481 &lt;dbl [37]&gt;    &lt;dbl [37]&gt;       
 8          67484 &lt;dbl [71]&gt;    &lt;dbl [71]&gt;       
 9          67491 &lt;dbl [219]&gt;   &lt;dbl [219]&gt;      
10          67493 &lt;dbl [84]&gt;    &lt;dbl [84]&gt;       
# ℹ 338 more rows</code></pre>
</div>
</div>
<p>Ahora, ¿cómo sacamos las entradas de una lista sin perder el formato tabular? Esto lo hacemos con <code>unnest</code>. Hay dos versiones: <code>unnest_longer</code> y <code>unnest_wider</code>. <code>unnest_wider</code> hace algo similar a <code>unnest_longer</code> pero en formato ancho, para usarlo hay que indicar los nombres de las nuevas columnas.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb108"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb108-1"><a href="#cb108-1" aria-hidden="true" tabindex="-1"></a>datos <span class="sc">|&gt;</span></span>
<span id="cb108-2"><a href="#cb108-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(IdConglomerado,biomasa_kg_C3,DiametroNormal_C3) <span class="sc">|&gt;</span></span>
<span id="cb108-3"><a href="#cb108-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(<span class="at">cols =</span> <span class="sc">-</span><span class="fu">c</span>(IdConglomerado),</span>
<span id="cb108-4"><a href="#cb108-4" aria-hidden="true" tabindex="-1"></a>              <span class="at">names_to =</span> <span class="st">"Variable"</span>,</span>
<span id="cb108-5"><a href="#cb108-5" aria-hidden="true" tabindex="-1"></a>               <span class="at">values_to =</span> <span class="st">"Valor"</span>) <span class="sc">|&gt;</span></span>
<span id="cb108-6"><a href="#cb108-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_wider</span>(<span class="at">id_cols =</span> <span class="fu">c</span>(IdConglomerado),</span>
<span id="cb108-7"><a href="#cb108-7" aria-hidden="true" tabindex="-1"></a>              <span class="at">names_from =</span> <span class="st">"Variable"</span>,</span>
<span id="cb108-8"><a href="#cb108-8" aria-hidden="true" tabindex="-1"></a>              <span class="at">values_from =</span> <span class="st">"Valor"</span>,</span>
<span id="cb108-9"><a href="#cb108-9" aria-hidden="true" tabindex="-1"></a>              <span class="at">values_fn =</span> list) <span class="sc">|&gt;</span></span>
<span id="cb108-10"><a href="#cb108-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">unnest_longer</span>(<span class="fu">c</span>(biomasa_kg_C3, DiametroNormal_C3))</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 26,035 × 3
   IdConglomerado biomasa_kg_C3 DiametroNormal_C3
            &lt;dbl&gt;         &lt;dbl&gt;             &lt;dbl&gt;
 1          67761         21.0                7.9
 2          67761         35.3               41.2
 3          67761         10.5               11.2
 4          67761         23.2                9.4
 5          67761          9.42               7.7
 6          67761         21.3               10  
 7          67761         14.5                8.2
 8          67761         12.9                8.7
 9          67761         62.0               12.4
10          67761         20.0               10  
# ℹ 26,025 more rows</code></pre>
</div>
</div>
<p>Este ejemplo sirve para ver que los tibbles pueden guardar listas en sus celdas.</p>
<p>Ya quedó como antes. Los dos pivots son muy útiles para acomodar datos para hacer ciertas operaciones o acomodos. Por ejemplo, en formato ancho es muy fácil calcular el porcentaje para cada valor, mientras que usualmente el formato largo es el más apropiado para hacer gráficas con ggplot.</p>
</section>
<section id="anidar-y-desanidar" class="level2">
<h2 class="anchored" data-anchor-id="anidar-y-desanidar">Anidar y desanidar</h2>
<p>Ahora si queremos meter datos dentro de una lista en un tibble se puede usar <code>nest</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb110"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb110-1"><a href="#cb110-1" aria-hidden="true" tabindex="-1"></a>datos <span class="sc">|&gt;</span></span>
<span id="cb110-2"><a href="#cb110-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(IdConglomerado,biomasa_kg_C3,DiametroNormal_C3) <span class="sc">|&gt;</span></span>
<span id="cb110-3"><a href="#cb110-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(<span class="at">cols =</span> <span class="sc">-</span><span class="fu">c</span>(IdConglomerado),</span>
<span id="cb110-4"><a href="#cb110-4" aria-hidden="true" tabindex="-1"></a>              <span class="at">names_to =</span> <span class="st">"Variable"</span>,</span>
<span id="cb110-5"><a href="#cb110-5" aria-hidden="true" tabindex="-1"></a>               <span class="at">values_to =</span> <span class="st">"Valor"</span>) <span class="sc">|&gt;</span></span>
<span id="cb110-6"><a href="#cb110-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_wider</span>(<span class="at">id_cols =</span> <span class="fu">c</span>(IdConglomerado),</span>
<span id="cb110-7"><a href="#cb110-7" aria-hidden="true" tabindex="-1"></a>              <span class="at">names_from =</span> <span class="st">"Variable"</span>,</span>
<span id="cb110-8"><a href="#cb110-8" aria-hidden="true" tabindex="-1"></a>              <span class="at">values_from =</span> <span class="st">"Valor"</span>,</span>
<span id="cb110-9"><a href="#cb110-9" aria-hidden="true" tabindex="-1"></a>              <span class="at">values_fn =</span> list) <span class="sc">|&gt;</span></span>
<span id="cb110-10"><a href="#cb110-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">unnest_longer</span>(<span class="fu">c</span>(biomasa_kg_C3, DiametroNormal_C3)) <span class="sc">|&gt;</span></span>
<span id="cb110-11"><a href="#cb110-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(IdConglomerado) <span class="sc">|&gt;</span></span>
<span id="cb110-12"><a href="#cb110-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">nest</span>(<span class="at">data =</span> biomasa_kg_C3) </span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 18,874 × 3
# Groups:   IdConglomerado [348]
   IdConglomerado DiametroNormal_C3 data            
            &lt;dbl&gt;             &lt;dbl&gt; &lt;list&gt;          
 1          67761               7.9 &lt;tibble [2 × 1]&gt;
 2          67761              41.2 &lt;tibble [1 × 1]&gt;
 3          67761              11.2 &lt;tibble [1 × 1]&gt;
 4          67761               9.4 &lt;tibble [1 × 1]&gt;
 5          67761               7.7 &lt;tibble [3 × 1]&gt;
 6          67761              10   &lt;tibble [5 × 1]&gt;
 7          67761               8.2 &lt;tibble [3 × 1]&gt;
 8          67761               8.7 &lt;tibble [5 × 1]&gt;
 9          67761              12.4 &lt;tibble [2 × 1]&gt;
10          67761              14.9 &lt;tibble [1 × 1]&gt;
# ℹ 18,864 more rows</code></pre>
</div>
</div>
<p>Y ahora veamos como podemos sacar los datos de una lista.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb112"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb112-1"><a href="#cb112-1" aria-hidden="true" tabindex="-1"></a>datos <span class="sc">|&gt;</span></span>
<span id="cb112-2"><a href="#cb112-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(IdConglomerado,biomasa_kg_C3,DiametroNormal_C3) <span class="sc">|&gt;</span></span>
<span id="cb112-3"><a href="#cb112-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(<span class="at">cols =</span> <span class="sc">-</span><span class="fu">c</span>(IdConglomerado),</span>
<span id="cb112-4"><a href="#cb112-4" aria-hidden="true" tabindex="-1"></a>              <span class="at">names_to =</span> <span class="st">"Variable"</span>,</span>
<span id="cb112-5"><a href="#cb112-5" aria-hidden="true" tabindex="-1"></a>               <span class="at">values_to =</span> <span class="st">"Valor"</span>) <span class="sc">|&gt;</span></span>
<span id="cb112-6"><a href="#cb112-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_wider</span>(<span class="at">id_cols =</span> <span class="fu">c</span>(IdConglomerado),</span>
<span id="cb112-7"><a href="#cb112-7" aria-hidden="true" tabindex="-1"></a>              <span class="at">names_from =</span> <span class="st">"Variable"</span>,</span>
<span id="cb112-8"><a href="#cb112-8" aria-hidden="true" tabindex="-1"></a>              <span class="at">values_from =</span> <span class="st">"Valor"</span>,</span>
<span id="cb112-9"><a href="#cb112-9" aria-hidden="true" tabindex="-1"></a>              <span class="at">values_fn =</span> list) <span class="sc">|&gt;</span></span>
<span id="cb112-10"><a href="#cb112-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">unnest_longer</span>(<span class="fu">c</span>(biomasa_kg_C3, DiametroNormal_C3)) <span class="sc">|&gt;</span></span>
<span id="cb112-11"><a href="#cb112-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(IdConglomerado) <span class="sc">|&gt;</span></span>
<span id="cb112-12"><a href="#cb112-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">nest</span>(<span class="at">data =</span> biomasa_kg_C3) <span class="sc">|&gt;</span></span>
<span id="cb112-13"><a href="#cb112-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">unnest</span>(data)</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 26,035 × 3
# Groups:   IdConglomerado [348]
   IdConglomerado DiametroNormal_C3 biomasa_kg_C3
            &lt;dbl&gt;             &lt;dbl&gt;         &lt;dbl&gt;
 1          67761               7.9         21.0 
 2          67761               7.9         17.0 
 3          67761              41.2         35.3 
 4          67761              11.2         10.5 
 5          67761               9.4         23.2 
 6          67761               7.7          9.42
 7          67761               7.7         11.7 
 8          67761               7.7          7.25
 9          67761              10           21.3 
10          67761              10           20.0 
# ℹ 26,025 more rows</code></pre>
</div>
</div>
<p><code>Nest</code> y <code>unnest</code> son útiles para hacer distintos modelos con diferentes grupos de datos o también para manejar casos no únicos al hacer pivot_wider.</p>
</section>
<section id="quitar-na" class="level2">
<h2 class="anchored" data-anchor-id="quitar-na">Quitar NA</h2>
<p>Hay otras funciones útiles en dplyr/tidyr para manejar datos con NA.</p>
<p>Quitar NA se hace con <code>drop_na</code></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb114"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb114-1"><a href="#cb114-1" aria-hidden="true" tabindex="-1"></a>datos <span class="sc">|&gt;</span></span>
<span id="cb114-2"><a href="#cb114-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="fu">across</span>(DiametroNormal_C3, <span class="sc">~</span><span class="fu">ifelse</span>(.x <span class="sc">&gt;=</span> <span class="dv">99999</span>, <span class="cn">NA</span>, .x))) <span class="sc">|&gt;</span></span>
<span id="cb114-3"><a href="#cb114-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">drop_na</span>(DiametroNormal_C3)</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 25,410 × 76
   UPMID IdConglomerado ArboladoID_C3 Anio_C3 Cve_Estado_C3 Estado_C3          
   &lt;dbl&gt;          &lt;dbl&gt;         &lt;dbl&gt;   &lt;dbl&gt;         &lt;dbl&gt; &lt;chr&gt;              
 1 40277          67761            NA    2019            16 Michoacán de Ocampo
 2 40277          67761            NA    2019            16 Michoacán de Ocampo
 3 40277          67761            NA    2019            16 Michoacán de Ocampo
 4 40279          67762            NA    2015            16 Michoacán de Ocampo
 5 40279          67762            NA    2015            16 Michoacán de Ocampo
 6 40279          67762            NA    2015            16 Michoacán de Ocampo
 7 40279          67762            NA    2015            16 Michoacán de Ocampo
 8 40279          67762            NA    2015            16 Michoacán de Ocampo
 9 40279          67762            NA    2015            16 Michoacán de Ocampo
10 40279          67762            NA    2015            16 Michoacán de Ocampo
# ℹ 25,400 more rows
# ℹ 70 more variables: CVEECON1_C3 &lt;dbl&gt;, CVEECON2_C3 &lt;dbl&gt;, CVEECON3_C3 &lt;chr&gt;,
#   CVEECON4_C3 &lt;chr&gt;, DESECON1_C3 &lt;chr&gt;, DESECON2_C3 &lt;chr&gt;, DESECON3_C3 &lt;chr&gt;,
#   DESECON4_C3 &lt;chr&gt;, Region_Hidrologica_C3 &lt;chr&gt;, CVE_S7_C3 &lt;chr&gt;,
#   X_C3 &lt;dbl&gt;, Y_C3 &lt;dbl&gt;, DESCRIP_S7_C3 &lt;chr&gt;, FORM_S7_C3 &lt;chr&gt;,
#   FAO_S7_C3 &lt;lgl&gt;, ECO_S7_C3 &lt;chr&gt;, Sitio_C3 &lt;dbl&gt;, Consecutivo_C3 &lt;dbl&gt;,
#   NoIndividuo_C3 &lt;dbl&gt;, NoRama_C3 &lt;dbl&gt;, Azimut_C3 &lt;dbl&gt;, …</code></pre>
</div>
</div>
</section>
<section id="sustituir-na" class="level2">
<h2 class="anchored" data-anchor-id="sustituir-na">Sustituir NA</h2>
<p>A veces se desea sustituir los NA con algún valor. Eso se puede hacer con <code>replace_na</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb116"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb116-1"><a href="#cb116-1" aria-hidden="true" tabindex="-1"></a>datos <span class="sc">|&gt;</span></span>
<span id="cb116-2"><a href="#cb116-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="fu">across</span>(DiametroNormal_C3, <span class="sc">~</span><span class="fu">ifelse</span>(.x <span class="sc">&gt;=</span> <span class="dv">99999</span>, <span class="cn">NA</span>, .x))) <span class="sc">|&gt;</span></span>
<span id="cb116-3"><a href="#cb116-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">replace_na</span>(<span class="fu">list</span>(<span class="at">DiametroNormal_C3 =</span> <span class="dv">0</span>)) <span class="sc">|&gt;</span></span>
<span id="cb116-4"><a href="#cb116-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(DiametroNormal_C3 <span class="sc">==</span> <span class="dv">0</span>)</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 625 × 76
   UPMID IdConglomerado ArboladoID_C3 Anio_C3 Cve_Estado_C3 Estado_C3          
   &lt;dbl&gt;          &lt;dbl&gt;         &lt;dbl&gt;   &lt;dbl&gt;         &lt;dbl&gt; &lt;chr&gt;              
 1 48449          65760            NA    2015            16 Michoacán de Ocampo
 2 40287          67766            NA    2019            16 Michoacán de Ocampo
 3 40289          67767            NA    2015            16 Michoacán de Ocampo
 4 44863          66591            NA    2016            16 Michoacán de Ocampo
 5 46036          66301            NA    2016            16 Michoacán de Ocampo
 6 46132          66349            NA    2015            16 Michoacán de Ocampo
 7 41362          67481            NA    2015            16 Michoacán de Ocampo
 8 40287          67766            NA    2019            16 Michoacán de Ocampo
 9 40287          67766            NA    2019            16 Michoacán de Ocampo
10 38204          68270            NA    2015            16 Michoacán de Ocampo
# ℹ 615 more rows
# ℹ 70 more variables: CVEECON1_C3 &lt;dbl&gt;, CVEECON2_C3 &lt;dbl&gt;, CVEECON3_C3 &lt;chr&gt;,
#   CVEECON4_C3 &lt;chr&gt;, DESECON1_C3 &lt;chr&gt;, DESECON2_C3 &lt;chr&gt;, DESECON3_C3 &lt;chr&gt;,
#   DESECON4_C3 &lt;chr&gt;, Region_Hidrologica_C3 &lt;chr&gt;, CVE_S7_C3 &lt;chr&gt;,
#   X_C3 &lt;dbl&gt;, Y_C3 &lt;dbl&gt;, DESCRIP_S7_C3 &lt;chr&gt;, FORM_S7_C3 &lt;chr&gt;,
#   FAO_S7_C3 &lt;lgl&gt;, ECO_S7_C3 &lt;chr&gt;, Sitio_C3 &lt;dbl&gt;, Consecutivo_C3 &lt;dbl&gt;,
#   NoIndividuo_C3 &lt;dbl&gt;, NoRama_C3 &lt;dbl&gt;, Azimut_C3 &lt;dbl&gt;, …</code></pre>
</div>
</div>
</section>
<section id="rellenar-datos-vacíos" class="level2">
<h2 class="anchored" data-anchor-id="rellenar-datos-vacíos">Rellenar datos vacíos</h2>
<p>Rellenar datos vación en función de las entradas que tienen próximas.</p>
<p>Veamos otros datos: - <a href="http://dgeiawf.semarnat.gob.mx:8080/ibi_apps/WFServlet?IBIF_ex=D3_BIODIV02_02&amp;IBIC_user=dgeia_mce&amp;IBIC_pass=dgeia_mce">Recuento de especies conocidas de fauna por grupo de vertebrados y según categoría de riesgo de acuerdo con la NOM-059-ECOL-1994</a></p>
<p>Si no lo pueden descargar directamente de la página, bájenlo de mi repositorio de github: <a href="https://github.com/JonathanVSV/CursoR/blob/main/Data/spNOM.xlsx">spNOM</a>.</p>
<p>Trae unos signos extraños como nombre de columna.</p>
<p>Los datos muestran el número de especies por estado de riesgo de diferentes grupos de animales.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb118"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb118-1"><a href="#cb118-1" aria-hidden="true" tabindex="-1"></a>datos2 <span class="ot">&lt;-</span> <span class="fu">read_excel</span>(<span class="st">"Data/spNOM.xlsx"</span>,</span>
<span id="cb118-2"><a href="#cb118-2" aria-hidden="true" tabindex="-1"></a>                     <span class="at">skip =</span> <span class="dv">3</span>,</span>
<span id="cb118-3"><a href="#cb118-3" aria-hidden="true" tabindex="-1"></a>                     <span class="at">na =</span> <span class="st">"-"</span>)</span>
<span id="cb118-4"><a href="#cb118-4" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(datos2)</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "\r\n\r\nCategoría"                       
[2] "\r\n\r\nGrupo"                           
[3] "\r\n\r\nEspecies conocidas"              
[4] "\r\nEspecies \r\nEndémicas"              
[5] "\r\nEspecies \r\namenazadas"             
[6] "Especies \r\nen peligro \r\nde extinción"
[7] "\r\n\r\nEspecies raras"                  
[8] "\r\n\r\nProtección especial"             </code></pre>
</div>
</div>
<p>Vamos a usar un truco para quitar esos signos con <code>str_replace_all</code> de los nombre de columnas de los datos.</p>
<p>Usaremos una función de otro paquete que no veremos a profundidad: stringr. Como <code>\</code> es un caracter especial hay que usar doble `<code>\\</code> para escaparlo.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb120"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb120-1"><a href="#cb120-1" aria-hidden="true" tabindex="-1"></a>nuevosnoms <span class="ot">&lt;-</span> datos2 <span class="sc">|&gt;</span> </span>
<span id="cb120-2"><a href="#cb120-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">colnames</span>() <span class="sc">|&gt;</span></span>
<span id="cb120-3"><a href="#cb120-3" aria-hidden="true" tabindex="-1"></a>  stringr<span class="sc">::</span><span class="fu">str_replace_all</span>(<span class="st">"</span><span class="sc">\\</span><span class="st">r</span><span class="sc">\\</span><span class="st">n</span><span class="sc">\\</span><span class="st">r</span><span class="sc">\\</span><span class="st">n|</span><span class="sc">\\</span><span class="st">r</span><span class="sc">\\</span><span class="st">n"</span>, <span class="st">""</span>)</span>
<span id="cb120-4"><a href="#cb120-4" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(datos2) <span class="ot">&lt;-</span> nuevosnoms</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Ahora si podemos usar <code>fill</code> para rellenar datos de una columna en particular y en el sentido indicado en <code>.direction</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb121"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb121-1"><a href="#cb121-1" aria-hidden="true" tabindex="-1"></a>datos2 <span class="sc">|&gt;</span> </span>
<span id="cb121-2"><a href="#cb121-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">fill</span>(<span class="fu">all_of</span>(<span class="st">"Categoría"</span>), </span>
<span id="cb121-3"><a href="#cb121-3" aria-hidden="true" tabindex="-1"></a>       <span class="at">.direction =</span> (<span class="st">"down"</span>))</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 5 × 8
  Categoría   Grupo     `Especies conocidas` `Especies Endémicas`
  &lt;chr&gt;       &lt;chr&gt;                    &lt;dbl&gt;                &lt;dbl&gt;
1 Vertebrados Anfibios                   290                  174
2 Vertebrados Aves                      1054                  111
3 Vertebrados Mamíferos                  491                  142
4 Vertebrados Peces                     2122                  163
5 Vertebrados Reptiles                   704                  368
# ℹ 4 more variables: `Especies amenazadas` &lt;dbl&gt;,
#   `Especies en peligro de extinción` &lt;dbl&gt;, `Especies raras` &lt;dbl&gt;,
#   `Protección especial` &lt;dbl&gt;</code></pre>
</div>
</div>
</section>
<section id="otras-funciones-útiles-1" class="level2">
<h2 class="anchored" data-anchor-id="otras-funciones-útiles-1">Otras funciones útiles</h2>
<p>Otras funciones útiles que ya no da tiempo de ver:</p>
<ul>
<li>unite: unir dos columnas en una sol</li>
<li>separate: Separar una columna en dos o más usando un separador.</li>
<li>expand: Expandir a usar todas las combinacinoes posibles. Esto muchas veces es similar a usar pivot_wider</li>
<li>complete. Completa observaciones que no aparecen en los datos y los rellena con NA.</li>
<li>hoist: Es como un unnest para ciertas variables</li>
<li>rowwise: Aplicar una operación para cada fila.</li>
</ul>


</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copiado");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copiado");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    // For code content inside modals, clipBoardJS needs to be initialized with a container option
    // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<nav class="page-navigation column-page-right">
  <div class="nav-page nav-page-previous">
      <a href="./2.ManejoDatos.html" class="pagination-link" aria-label="2.ManejoDatos">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-title">2.ManejoDatos</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./4.AnálisisEstad.html" class="pagination-link" aria-label="4.AnálisisEstad">
        <span class="nav-page-text"><span class="chapter-title">4.AnálisisEstad</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->




</body></html>